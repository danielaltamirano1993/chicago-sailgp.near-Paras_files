"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[6302],{16302:function(t,e,n){var a=n(92809),i=n(30266),r=n(809),o=n.n(r),s=n(67294),c=n(52450),l=n(81941),d=n(41664),u=n(31427),m=n(11163),x=n(39499),p=n.n(x),v=n(58533),f=n(31049),h=n(7570),_=n(55404),k=n(44303),b=n(77547),g=n(18734),y=n(77084),j=n(64672),w=n(9669),N=n.n(w),S=n(35277),O=n(56601),Z=n(3413),P=n(12954),L=n(85893);function E(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);e&&(a=a.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,a)}return n}function T(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?E(Object(n),!0).forEach((function(e){(0,a.Z)(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):E(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}e.Z=function(t){var e=t.name,n=void 0===e?"default":e,a=t.tokens,i=t.fetchData,r=t.hasMore,o=t.displayType,c=void 0===o?"large":o,l=t.volume,d=t.showRarityScore,m=void 0!==d&&d,x=t.showLike,p=void 0!==x&&x,f=(0,u.Z)(),k=(0,s.useRef)(),g=(0,s.useRef)(f.marketScrollPersist[n]),y=(0,h.Y)().localeLn,j=(0,s.useState)({}),w=j[0],N=j[1];(0,s.useEffect)((function(){g.current=f.marketScrollPersist[n]}),[f.marketScrollPersist[n]]),(0,s.useEffect)((function(){return function(){k.current&&k.current.removeEventListener("wheel",S)}}),[k,f.marketScrollPersist[n]]);var S=function(t){t.preventDefault();var e=t.deltaY?t.deltaY:t.deltaX,n=Math.floor(e),a=g.current||0;O(a-n)},O=function(t){var e=-(k.current.lastElementChild.scrollWidth-k.current.offsetWidth);t>0?f.setMarketScrollPersist(n,0):t<e?(i(),f.setMarketScrollPersist(n,e)):f.setMarketScrollPersist(n,t)};return(0,L.jsxs)("div",{ref:k,className:"rounded-md p-4 md:p-0",children:[0===a.length&&!r&&(0,L.jsx)("div",{className:"w-full",children:(0,L.jsxs)("div",{className:"m-auto text-2xl text-gray-600 font-semibold py-32 text-center",children:[(0,L.jsx)("div",{className:"w-40 m-auto",children:(0,L.jsx)("img",{src:"/cardstack.png",className:"opacity-75"})}),(0,L.jsx)("p",{className:"mt-4",children:y("NoCards")})]})}),(0,L.jsx)(v.Z,{dataLength:a.length,next:i,hasMore:r,loader:"large"===c?(0,L.jsx)(_.Z,{length:4}):(0,L.jsx)(b.Z,{length:6}),className:"-mx-4",children:(0,L.jsx)("div",{className:"flex flex-wrap select-none",children:a.map((function(t,e){return(0,L.jsx)(C,{initialData:t,displayType:c,volume:t.volume||(null===l||void 0===l?void 0:l[e]),showRarityScore:m,showLike:p,tokenIsLiked:w,setTokenIsLiked:N},"".concat(t.contract_id,"::").concat(t.token_series_id,"/").concat(t.token_id,"-").concat(c,"-").concat(e))}))})})]})};var C=function(t){var e,n,r,x,v,_,b,w,E=t.initialData,C=t.displayType,D=void 0===C?"large":C,I=t.volume,M=t.showRarityScore,A=t.showLike,U=t.tokenIsLiked,R=t.setTokenIsLiked,z=(0,u.Z)((function(t){return t.currentUser})),B=(0,g.Z)({key:"".concat(E.contract_id,"::").concat(E.token_series_id,"/").concat(E.token_id),initialData:E,params:{lookup_likes:!0,liked_by:z}}),F=B.token,Y=B.mutate,q=(0,u.Z)(),V=(0,m.useRouter)(),W=(0,s.useState)(null),G=W[0],H=W[1],J=(0,s.useState)(null),X=J[0],$=J[1],K=(0,s.useState)(!1),Q=K[0],tt=K[1],et=(0,s.useState)(0),nt=et[0],at=et[1],it=(0,s.useState)(!1),rt=it[0],ot=it[1],st=(0,h.Y)().localeLn,ct=(0,j.p)(),lt="".concat(F.contract_id,"::").concat(F.token_series_id),dt=null!==(e=F.token)&&void 0!==e&&e.amount&&0!==(null===(n=F.token)||void 0===n||null===(r=n.bidder_list)||void 0===r?void 0:r.length)?null===(x=F.token)||void 0===x?void 0:x.amount:F.lowest_price||F.price,ut=(0,s.useState)(!1),mt=ut[0],xt=ut[1],pt=function(){ct.show({text:(0,L.jsx)("div",{className:"text-sm text-white text-justify",children:(0,L.jsx)("p",{children:"This auction data is being updated, please refresh the page periodically each minute."})}),type:"updatingAuction",duration:null})};(0,s.useEffect)((function(){ft()}),[mt]),(0,s.useEffect)((function(){vt()}),[z]),(0,s.useEffect)((function(){void 0!==(null===F||void 0===F?void 0:F.total_likes)&&(F.likes?tt(!0):tt(!1),at(null===F||void 0===F?void 0:F.total_likes))}),[JSON.stringify(F)]),(0,s.useEffect)((function(){var t,e;if(!0===(null===(t=U[lt])||void 0===t?void 0:t.liked)){var n,a;tt(!0),at(null!==(n=null===(a=U[lt])||void 0===a?void 0:a.total_liked)&&void 0!==n?n:nt+1)}else{if(!1!==(null===(e=U[lt])||void 0===e?void 0:e.liked))return;var i,r;tt(!1),at(null!==(i=null===(r=U[lt])||void 0===r?void 0:r.total_liked)&&void 0!==i?i:nt-1)}}),[U]);var vt=function(){var t=(0,i.Z)(o().mark((function t(){return o().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Y();case 2:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}(),ft=function(){var t=function(t){var e=String(t).slice(0,13);if("undefined"!==e)return e}(null===F||void 0===F?void 0:F.ended_at),e=setInterval((function(){var n=(new Date).getTime();mt||parseInt(t)-parseInt(n)<=0&&(clearInterval(e),xt(!0))}),1e3)},ht=function(){var t=(0,i.Z)(o().mark((function t(e){var n;return o().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Y();case 2:if(t.t0=t.sent,t.t0){t.next=5;break}t.t0=e;case 5:if(n=t.t0,!navigator.userAgent.includes("iPhone")){t.next=10;break}return V.push("/token/".concat(n.contract_id,"::").concat(n.token_series_id)),t.abrupt("return");case 10:V.push({pathname:V.pathname,query:T(T({},V.query),{},{tokenId:n.token_id,contractId:n.contract_id})},"/token/".concat(n.contract_id,"::").concat(n.token_series_id,"/").concat(n.token_id),{shallow:!0,scroll:!1});case 11:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),_t=function(t){var e,n=[];return null===F||void 0===F||null===(e=F.bidder_list)||void 0===e||e.map((function(e){"bidder"===t?n.push(e.bidder):"time"===t?n.push(e.issued_at):"amount"===t&&n.push(e.amount)})),n[n.length-1]},kt=function(){var t=(0,i.Z)(o().mark((function t(e,n,i){var r,s,c;return o().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(z){t.next=3;break}return ot(!0),t.abrupt("return");case 3:return r={liked:!0,total_liked:nt+1},s=T(T({},U),{},(0,a.Z)({},lt,r)),R(s),c={account_id:z},t.t0=N(),t.t1="".concat("https://api-v2-mainnet.paras.id","/like/").concat(e,"/").concat(n),t.t2=c,t.next=12,S.default.authToken();case 12:return t.t3=t.sent,t.t4={authorization:t.t3},t.t5={headers:t.t4},t.next=17,t.t0.put.call(t.t0,t.t1,t.t2,t.t5);case 17:if(200===t.sent.status){t.next=22;break}return tt(!1),at(nt-1),t.abrupt("return");case 22:(0,P.CG)("".concat(e,"::").concat(n),i);case 23:case"end":return t.stop()}}),t)})));return function(e,n,a){return t.apply(this,arguments)}}(),bt=function(){var t=(0,i.Z)(o().mark((function t(e,n,i){var r,s,c;return o().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(z){t.next=3;break}return ot(!0),t.abrupt("return");case 3:return r={liked:!1,total_liked:nt-1},s=T(T({},U),{},(0,a.Z)({},lt,r)),R(s),c={account_id:z},t.t0=N(),t.t1="".concat("https://api-v2-mainnet.paras.id","/unlike/").concat(e,"/").concat(n),t.t2=c,t.next=12,S.default.authToken();case 12:return t.t3=t.sent,t.t4={authorization:t.t3},t.t5={headers:t.t4},t.next=17,t.t0.put.call(t.t0,t.t1,t.t2,t.t5);case 17:if(200===t.sent.status){t.next=22;break}return tt(!0),at(nt+1),t.abrupt("return");case 22:(0,P.h2)("".concat(e,"::").concat(n),i);case 23:case"end":return t.stop()}}),t)})));return function(e,n,a){return t.apply(this,arguments)}}();return(0,L.jsxs)(L.Fragment,{children:[(0,L.jsx)(f.Z,{tokens:[F],isAuctionEnds:mt}),(0,L.jsx)(k.Z,{useNFTModal:!0,activeToken:G,onCloseModal:function(){H(null),$(null)},modalType:X,setModalType:$}),(0,L.jsxs)("div",{className:"".concat("large"===D?"w-full md:w-1/3 lg:w-1/4 p-4":"w-1/2 md:w-1/4 lg:w-1/6 p-2"," flex-shrink-0 relative"),children:[(0,L.jsx)(d.default,{href:"/token/".concat(F.contract_id,"::").concat(F.token_series_id,"/").concat(F.token_id),children:(0,L.jsx)("a",{onClick:function(t){return t.preventDefault()},children:(0,L.jsx)("div",{className:"w-full m-auto",children:(0,L.jsx)(c.Z,{imgUrl:(0,l.pf)(F.metadata.media,null,{width:"600",useOriginal:!1,isMediaCdn:F.isMediaCdn}),audioUrl:F.metadata.mime_type&&F.metadata.mime_type.includes("audio")&&F.metadata.animation_url,threeDUrl:F.metadata.mime_type&&F.metadata.mime_type.includes("model")&&F.metadata.animation_url,iframeUrl:F.metadata.mime_type&&F.metadata.mime_type.includes("iframe")&&F.metadata.animation_url,imgBlur:F.metadata.blurhash,flippable:!0,token:{title:F.metadata.title,edition_id:F.edition_id,collection:F.metadata.collection||F.contract_id,copies:F.metadata.copies,creatorId:F.metadata.creator_id||F.contract_id,is_creator:F.is_creator,description:F.metadata.description,royalty:F.royalty,attributes:F.metadata.attributes,mime_type:F.metadata.mime_type,is_auction:null===F||void 0===F?void 0:F.is_auction,started_at:null===F||void 0===F?void 0:F.started_at,ended_at:null===F||void 0===F?void 0:F.ended_at,animation_url:null===F||void 0===F?void 0:F.animation_url},isAbleToLike:!0,onLike:function(){return!Q&&kt(F.contract_id,F.token_series_id,"double_click_likes")}})})})}),(0,L.jsxs)("div",{className:"px-1 relative ".concat("large"===D?"mt-4":"mt-2"),children:[(0,L.jsxs)("div",{className:"block",children:[(0,L.jsx)("p",{className:"text-gray-400 text-xs",children:null!==F&&void 0!==F&&F.is_auction&&!mt?st("OnAuction"):F.lowest_price&&F.metadata.copies>1?st("StartFrom"):st("OnSale")}),(null===F||void 0===F?void 0:F.is_auction)&&!mt&&(0,L.jsx)("p",{className:"text-gray-100 text-[9px] font-bold",children:null!==F&&void 0!==F&&F.bidder_list?"Highest Bid":"Starting Bid"}),(0,L.jsx)("div",{className:"text-gray-100 ".concat("large"===D&&(null===F||void 0===F||!F.is_auction)||mt?"text-2xl":"small"!==D&&null!==F&&void 0!==F&&F.is_auction&&!mt?"text-lg -mt-.5 -mb-2":"small"===D&&null!==F&&void 0!==F&&F.is_auction&&!mt?"text-base":"text-lg"),children:dt||null!==F&&void 0!==F&&F.is_auction&&!mt?(0,L.jsxs)("div",{className:"flex items-baseline space-x-1",children:[(0,L.jsx)("div",{className:"truncate",children:"0"!==dt||null!==F&&void 0!==F&&F.is_auction?dt&&null!==F&&void 0!==F&&F.has_price&&!mt?"".concat((0,l.gL)(null!==F&&void 0!==F&&F.is_auction&&!mt&&0!==(null===F||void 0===F||null===(v=F.bidder_list)||void 0===v?void 0:v.length)&&_t("amount")||dt,24,4)," \u24c3"):(0,L.jsx)("div",{className:"line-through text-red-600",children:(0,L.jsx)("span",{className:"text-gray-100",children:st("SALE")})}):st("Free")}),dt&&!mt&&(0,L.jsxs)("div",{className:"".concat(null!==F&&void 0!==F&&F.is_auction?"text-[9px]":"text-xs"," text-gray-400 truncate"),children:["~ $",(0,l.gL)(p().BigInt(null!==F&&void 0!==F&&F.is_auction&&0!==(null===F||void 0===F||null===(_=F.bidder_list)||void 0===_?void 0:_.length)&&_t("amount")||dt)*q.nearUsdPrice,24,2)]})]}):(0,L.jsx)("div",{className:"line-through text-red-600",children:(0,L.jsx)("span",{className:"text-gray-100",children:st("SALE")})})})]}),(0,L.jsxs)("div",{className:"".concat("large"===D?"block":"flex gap-1"," text-right absolute top-0 right-0"),children:[M&&!!F.metadata.score&&(0,L.jsxs)("p",{className:"text-white opacity-80 md:text-sm",style:{fontSize:11},children:["Rarity Score ",null===(b=F.metadata)||void 0===b||null===(w=b.score)||void 0===w?void 0:w.toFixed(2)]}),A&&(0,L.jsxs)("div",{className:"inline-flex items-center",children:[(0,L.jsx)("div",{className:"cursor-pointer",onClick:function(){Q?bt(F.contract_id,F.token_series_id,"list"):kt(F.contract_id,F.token_series_id,"list")},children:(0,L.jsx)(O.Z,{size:"large"===D?18:16,color:Q?"#c51104":"transparent",stroke:Q?"none":"white"})}),(0,L.jsx)("p",{className:"text-white ml-2 ".concat("large"===D?"text-sm":"text-xs"),children:(0,l.NU)(nt||0,1)})]})]}),I&&(0,L.jsxs)("div",{className:"".concat("large"===D?"block":"flex flex-col"," text-right absolute top-0 right-0"),children:[(0,L.jsx)("p",{className:"".concat("large"===D?"block":"hidden"," text-white opacity-80 md:text-sm"),style:{fontSize:11},children:"Volume Total"}),(0,L.jsx)("p",{className:"".concat("large"===D?"hidden":"block"," text-white opacity-80 md:text-sm"),style:{fontSize:11},children:"Volume Total"}),(0,L.jsxs)("p",{className:"text-white opacity-80 md:text-base",children:[(0,y.formatNearAmount)(I)," \u24c3"]})]}),(0,L.jsxs)("div",{className:"flex justify-between md:items-baseline",children:[null===F||void 0===F||!F.is_auction||z!==(null===F||void 0===F?void 0:F.owner_id)&&_t("bidder")!==z?(0,L.jsx)("p",{className:"font-bold text-white ".concat(mt&&"text-opacity-40"," cursor-pointer hover:opacity-80 ").concat("large"===D?"text-base md:text-base":"text-sm md:text-sm"," mb-1 md:mb-0"),onClick:function(){return mt?pt():function(t){var e=t.price;if(H(t),t.owner_id===z){if(t.is_staked)return void V.push("https://stake.paras.id");$("updatelisting")}else $(!e||null!==t&&void 0!==t&&t.is_auction&&!mt?null!==t&&void 0!==t&&t.is_auction&&!mt?"placebid":"offer":"buy")}(F)},children:function(t){return t.owner_id===z?t.is_staked?st("Unstake"):st("UpdateListing"):!t.price||null!==t&&void 0!==t&&t.is_auction||mt?null!==t&&void 0!==t&&t.is_auction&&!mt?"Place a Bid":mt?"Auction Ends":"Place Offer":"Buy Now"}(F)}):_t("bidder")===z?(0,L.jsx)("p",{className:"font-bold text-white text-opacity-40 ".concat("large"===D?"text-base md:text-base":"text-sm md:text-sm"," mb-1 md:mb-0"),children:"You're currently bid"}):mt?(0,L.jsx)("p",{className:"font-bold text-white text-opacity-40 hover:text-opacity-60 cursor-pointer ".concat("large"===D?"text-base md:text-base":"text-sm md:text-sm"," mb-1 md:mb-0"),onClick:pt,children:"Auction Ends"}):(0,L.jsx)("p",{className:"font-bold text-white text-opacity-40 ".concat("large"===D?"text-base md:text-base":"text-sm md:text-sm"," mb-1 md:mb-0"),children:"Auction on going"}),(0,L.jsx)(d.default,{href:"/token/".concat(F.contract_id,"::").concat(F.token_series_id,"/").concat(F.token_id),children:(0,L.jsx)("a",{onClick:function(t){t.preventDefault(),ht(F)},className:"text-gray-300 underline ".concat("large"===D?"text-sm md:text-sm":"text-xs md:text-xs"),children:"large"===D?"See Details":"More"})})]})]})]}),(0,L.jsx)(Z.Z,{onClose:function(){return ot(!1)},show:rt})]})}}}]);
//# sourceMappingURL=6302-b269671cf14abdcc2994.js.map
"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[2306],{14718:function(e,t,n){var i=n(30266),a=n(809),s=n.n(a),r=n(42283),c=n(31427),l=n(81941),o=n(7570),d=n(32275),u=n(49566),m=n(54929),x=n(88154),v=n(88054),h=n(77084),p=n(39499),f=n.n(p),_=n(60035),j=n(67294),b=n(53367),g=n(4866),w=n(71870),N=n(35277),y=n(64672),k=n(85893);t.Z=function(e){var t,n,a,p,S,E=e.data,A=e.show,C=e.onClose,T=e.onSuccess,Z=(0,j.useState)(!1),I=Z[0],B=Z[1],F=(0,b.Z)(null===E||void 0===E?void 0:E.metadata.creator_id),O=(0,o.Y)().localeLn,L=(0,r.cI)(),R=L.errors,D=L.register,U=L.handleSubmit,M=L.watch,G=L.setValue,z=(0,j.useState)(!1),P=z[0],W=z[1],Y=(0,c.Z)((function(e){return{currentUser:e.currentUser,userBalance:e.userBalance,setTransactionRes:e.setTransactionRes}})),q=Y.currentUser,K=Y.userBalance,J=Y.setTransactionRes,H=(0,y.p)();(0,j.useEffect)((function(){E&&A&&G("bidAuctionAmount",Q())}),[E,A]);var V=function(){var e=(0,i.Z)(s().mark((function e(){var t,n,i;return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,N.default.viewFunction({methodName:"storage_balance_of",contractId:"marketplace.paras.near",args:{account_id:q}});case 3:return t=e.sent,e.next=6,N.default.viewFunction({methodName:"get_supply_by_owner_id",contractId:"marketplace.paras.near",args:{account_id:q}});case 6:if(n=e.sent,i=f().multiply(f().BigInt(parseInt(n)+1),f().BigInt(v.STORAGE_ADD_MARKET_FEE)),!f().greaterThanOrEqual(f().BigInt(t),i)){e.next=10;break}return e.abrupt("return",!0);case 10:return e.abrupt("return",!1);case 13:e.prev=13,e.t0=e.catch(0),(0,x.p)(e.t0);case 16:case"end":return e.stop()}}),e,null,[[0,13]])})));return function(){return e.apply(this,arguments)}}(),$=function(){var e=(0,i.Z)(s().mark((function e(t){var n,i,a,r,c,l,o,d;return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.bidAuctionAmount,W(!0),e.next=4,V();case 4:if(i=e.sent,e.prev=5,r={receiver_id:q},c={nft_contract_id:E.contract_id,token_id:E.token_id,ft_token_id:"near",amount:(0,h.parseNearAmount)(n)},!i){e.next=14;break}return e.next=11,N.default.signAndSendTransaction({receiverId:"marketplace.paras.near",actions:[{methodName:"add_bid",args:c,deposit:(0,h.parseNearAmount)(n),gas:v.GAS_FEE}]});case 11:l=e.sent,e.next=17;break;case 14:return e.next=16,N.default.signAndSendTransaction({receiverId:"marketplace.paras.near",actions:[{methodName:"storage_deposit",args:r,deposit:v.STORAGE_ADD_MARKET_FEE,gas:v.GAS_FEE},{methodName:"add_bid",args:c,deposit:(0,h.parseNearAmount)(n),gas:v.GAS_FEE}]});case 16:l=e.sent;case 17:null!==(a=l)&&void 0!==a&&a.response.error?H.show({text:(0,k.jsx)("div",{className:"font-semibold text-center text-sm",children:null===(o=l)||void 0===o?void 0:o.response.error.kind.ExecutionError}),type:"error",duration:2500}):l&&(C(),J(null===(d=l)||void 0===d?void 0:d.response),T&&T(),H.show({text:(0,k.jsx)("div",{className:"font-semibold text-center text-sm",children:"Successfully add bid auction"}),type:"success",duration:2500})),W(!1),e.next=25;break;case 21:e.prev=21,e.t0=e.catch(5),(0,x.p)(e.t0),W(!1);case 25:case"end":return e.stop()}}),e,null,[[5,21]])})));return function(t){return e.apply(this,arguments)}}(),X=function(e){var t,n=[];return null===E||void 0===E||null===(t=E.bidder_list)||void 0===t||t.map((function(t){"bidder"===e?n.push(t.bidder):"time"===e?n.push(t.issued_at):"amount"===e&&n.push(t.amount)})),n[n.length-1]},Q=function(){if(null!==E&&void 0!==E&&E.bidder_list&&0!==(null===E||void 0===E?void 0:E.bidder_list.length)){var e,t=f().BigInt(null!==E&&void 0!==E&&E.bidder_list&&0!==(null===E||void 0===E||null===(e=E.bidder_list)||void 0===e?void 0:e.length)?X("amount"):null===E||void 0===E?void 0:E.price),n=f().multiply(f().divide(t,f().BigInt(100)),f().BigInt(5));return(f().add(t,n).toString()/Math.pow(10,24)).toFixed(2)}return(0,l.gL)(E.price||(null===E||void 0===E?void 0:E.lowest_price),24,4)};return(0,k.jsxs)(k.Fragment,{children:[(0,k.jsx)(d.Z,{isShow:A,close:C,closeOnBgClick:!1,closeOnEscape:!1,children:(0,k.jsxs)("div",{className:"max-w-sm w-full p-4 bg-gray-800  m-auto rounded-md relative",children:[(0,k.jsx)("div",{className:"absolute right-0 top-0 pr-4 pt-4",children:(0,k.jsx)("div",{className:"cursor-pointer",onClick:C,children:(0,k.jsx)(_.kL,{})})}),(0,k.jsxs)("div",{children:[(0,k.jsx)("div",{className:"flex items-center space-x-2",children:(0,k.jsx)("h1",{className:"text-2xl font-bold text-white tracking-tight",children:"Place a Bid Auction"})}),(0,k.jsxs)("p",{className:"text-white mt-2",children:[O("AboutToBid")," ",(0,k.jsx)("b",{children:null===E||void 0===E?void 0:E.metadata.title}),"."]}),(0,k.jsxs)("form",{onSubmit:U((function(e){return null!==F&&void 0!==F&&F.flag?B(!0):$(e)})),children:[(0,k.jsxs)("div",{className:"mt-4 ",children:[(0,k.jsxs)("label",{className:"block text-sm mb-2 text-white opacity-90",children:[O("AmountIn")," \u24c3"]}),(0,k.jsx)(m.oH,{name:"bidAuctionAmount",type:"number",step:"any",ref:D({required:!0,min:(0,l.gL)(Q(),0,2),max:parseFloat(K.available/Math.pow(10,24))}),className:"".concat(R.bidAuctionAmount&&"error"),placeholder:"Place your Bid"}),(0,k.jsxs)("div",{className:"mt-2 text-sm text-red-500",children:["required"===(null===(t=R.bidAuctionAmount)||void 0===t?void 0:t.type)&&"Bid amount is required","min"===(null===(n=R.bidAuctionAmount)||void 0===n?void 0:n.type)&&"Minimum ".concat((0,l.gL)(Q(),0,2)," \u24c3"),"max"===(null===(a=R.bidAuctionAmount)||void 0===a?void 0:a.type)&&"You don't have enough balance"]})]}),(0,k.jsxs)("div",{className:"mt-4 text-center text-white opacity-90",children:[(0,k.jsxs)("div",{className:"flex justify-between",children:[(0,k.jsx)("div",{className:"text-sm",children:"Your balance"}),(0,k.jsxs)("div",{children:[(0,l.gL)(K.available,24,4)," \u24c3"]})]}),(0,k.jsxs)("div",{className:"flex justify-between",children:[(0,k.jsx)("div",{className:"text-sm",children:O("Minimum Bid")}),(0,k.jsxs)("div",{children:[Q()," \u24c3"]})]}),(0,k.jsxs)("div",{className:"flex justify-between",children:[(0,k.jsx)("div",{className:"text-sm",children:null!==E&&void 0!==E&&E.bidder_list&&0!==(null===E||void 0===E||null===(p=E.bidder_list)||void 0===p?void 0:p.length)?O("Highest Bid"):O("Starting Bid")}),(0,k.jsxs)("div",{children:[null!==E&&void 0!==E&&E.bidder_list&&0!==(null===E||void 0===E||null===(S=E.bidder_list)||void 0===S?void 0:S.length)?(0,l.gL)(X("amount"),24,4):(0,l.gL)(E.price,24,4)," ","\u24c3"]})]})]}),(null===F||void 0===F?void 0:F.flag)&&(0,k.jsx)("div",{className:"z-20 bottom-0 flex items-center justify-center px-4 mt-4 w-full",children:(0,k.jsx)("p",{className:"text-white text-sm m-2 mt-2 p-1 font-bold w-full mx-auto px-4 text-center rounded-md ".concat(g.M[null===F||void 0===F?void 0:F.flag]),children:O(g.z[null===F||void 0===F?void 0:F.flag])})}),(0,k.jsx)("p",{className:"text-white opacity-80 mt-4 text-sm text-center px-4",children:O("RedirectedToconfirm")}),(0,k.jsxs)("div",{className:"",children:[(0,k.jsx)(u.Z,{disabled:P,isLoading:P,className:"mt-4",isFullWidth:!0,size:"md",type:"submit",children:O("Place a bid")}),(0,k.jsx)(u.Z,{variant:"ghost",size:"md",isFullWidth:!0,className:"mt-4",onClick:C,children:O("Cancel")})]})]})]})]})}),I&&(0,k.jsx)(w.Z,{creatorData:F,action:function(){return $(M("bidAuctionAmount"))},setIsShow:function(e){return B(e)},onClose:C,type:"placeabid"})]})}},22306:function(e,t,n){n.d(t,{Z:function(){return he}});var i=n(92809),a=n(30266),s=n(809),r=n.n(s),c=n(67294),l=n(35125),o=n(31298),d=n(11163),u=n(49566),m=n(60035),x=n(72664),v=n(44516),h=n(34392),p=n(81941),f=n(65548),_=n(29914),j=n(70357),b=n(32275),g=n(3413),w=n(88054),N=n(88154),y=n(7570),k=n(12954),S=n(35277),E=n(31427),A=n(64672),C=n(8100),T=n(85893),Z=function(e){var t=e.show,n=e.onClose,i=e.data,s=(0,c.useState)(!1),l=s[0],o=s[1],d=(0,c.useState)(!1),m=d[0],x=d[1],v=(0,y.Y)().localeLn,h=(0,E.Z)().currentUser,p=(0,A.p)(),f=function(){var e=(0,a.Z)(r().mark((function e(){var t,a;return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(h){e.next=3;break}return o(!0),e.abrupt("return");case 3:return x(!0),(0,k.v9)(i.token_id),e.prev=5,t={token_id:i.token_id},e.next=9,S.default.callFunction({contractId:i.contract_id,methodName:"nft_burn",args:t,gas:w.GAS_FEE,deposit:"1"});case 9:if(null===(a=e.sent)||void 0===a||!a.response.error){e.next=15;break}return p.show({text:(0,T.jsx)("div",{className:"font-semibold text-center text-sm",children:null===a||void 0===a?void 0:a.response.error.kind.ExecutionError}),type:"error",duration:2500}),e.abrupt("return");case 15:a&&(p.show({text:(0,T.jsx)("div",{className:"font-semibold text-center text-sm",children:"Successfully burned ".concat(i.metadata.title)}),type:"success",duration:2500}),setTimeout((function(){n(),(0,C.JG)("".concat(i.contract_id,"::").concat(i.token_series_id,"/").concat(i.token_id))}),2500));case 16:x(!1),e.next=23;break;case 19:e.prev=19,e.t0=e.catch(5),(0,N.p)(e.t0),x(!1);case 23:case"end":return e.stop()}}),e,null,[[5,19]])})));return function(){return e.apply(this,arguments)}}();return(0,T.jsxs)(T.Fragment,{children:[(0,T.jsx)(b.Z,{isShow:t,closeOnBgClick:!1,closeOnEscape:!1,close:n,children:(0,T.jsx)("div",{className:"max-w-sm w-full p-4 bg-gray-800 m-4 md:m-auto rounded-md",children:(0,T.jsxs)("div",{children:[(0,T.jsx)("h1",{className:"text-2xl font-bold text-white tracking-tight",children:v("BurnAsset")}),(0,T.jsxs)("p",{className:"text-white mt-2",children:[v("AreAboutToBurn")," ",i.metadata.title]}),(0,T.jsx)("div",{className:"mt-4",children:(0,T.jsx)("div",{className:"mt-2 text-sm text-red-500"})}),(0,T.jsx)("p",{className:"text-white mt-4 text-sm text-center opacity-90 px-4",children:v("RedirectedToconfirm")}),(0,T.jsxs)("div",{className:"mt-6",children:[(0,T.jsx)(u.Z,{size:"md",isFullWidth:!0,onClick:f,isLoading:m,children:v("Burn")}),(0,T.jsx)(u.Z,{variant:"ghost",size:"md",isFullWidth:!0,className:"mt-4",onClick:n,children:v("Cancel")})]})]})})}),(0,T.jsx)(g.Z,{onClose:function(){return o(!1)},show:l})]})},I=n(66256),B=n(33619),F=n(10868),O=n(78492),L=n(92326),R=n(35338),D=n(63868),U=n(19286),M=n(3422),G=n(52450),z=n(83019),P=n(77084),W=n(93440),Y=n(9669),q=n.n(Y),K=n(30109),J=n(6155),H=n(626),V=n.n(H),$=n(83789),X=n(42119),Q=n.n(X),ee=n(84614),te=n(98006),ne=n(41664),ie=n(18734),ae=function(e){var t,n,i=e.initial,s=void 0===i?{}:i,l=(0,ie.Z)({key:"".concat(s.contract_id,"::").concat(s.token_series_id,"/").concat(s.token_id),initialData:s}).token,o=(0,c.useState)({}),d=o[0],u=o[1],m=(0,y.Y)().localeLn;(0,c.useEffect)((function(){l.owner_id&&x()}),[l.owner_id]);var x=function(){var e=(0,a.Z)(r().mark((function e(){var t,n;return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Q().get("".concat("https://api-v2-mainnet.paras.id","/profiles"),{params:{accountId:null!==l&&void 0!==l&&l.bidder_list?v("bidder"):l.owner_id},ttl:60});case 3:t=e.sent,n=t.data.data.results[0]||{},u(n),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),(0,N.p)(e.t0);case 11:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(){return e.apply(this,arguments)}}(),v=function(e){var t,n=[];return null===l||void 0===l||null===(t=l.bidder_list)||void 0===t||t.map((function(t){"bidder"===e?n.push(t.bidder):"time"===e?n.push(t.issued_at):"amount"===e&&n.push(t.amount)})),n.reverse()[0]};return(0,T.jsxs)("div",{className:"bg-gray-800 mt-2 p-3 rounded-md shadow-md",children:[(0,T.jsxs)("p",{className:"text-right text-[9px]",children:[function(e){var t=String(e).slice(0,13);if("undefined"!==t)return new Date(parseInt(t)).toUTCString().split("GMT")[0]}(null!==l&&void 0!==l&&l.bidder_list&&0!==(null===l||void 0===l?void 0:l.bidder_list.length)?v("time"):l.started_at)," ","UTC"]}),(0,T.jsxs)("div",{className:"flex items-center justify-between -mt-2",children:[(0,T.jsxs)("div",{className:"flex items-center",children:[(0,T.jsx)(ne.default,{href:"/".concat(null!==l&&void 0!==l&&l.bidder_list&&0!==(null===l||void 0===l?void 0:l.bidder_list.length)?v("bidder"):l.owner_id),children:(0,T.jsx)("a",{className:"hover:opacity-80",children:(0,T.jsx)(te.Z,{size:"lg",src:(0,p.pf)(d.imgUrl),className:"align-bottom"})})}),(0,T.jsxs)("div",{children:[(0,T.jsx)("div",{className:"ml-2",children:(0,T.jsx)(ne.default,{href:"/".concat(null!==l&&void 0!==l&&l.bidder_list&&0!==(null===l||void 0===l?void 0:l.bidder_list.length)?v("bidder"):l.owner_id),children:(0,T.jsx)("a",{className:"hover:opacity-80",children:(0,T.jsx)("p",{className:"text-white font-semibold truncate text-sm",children:(0,p.oe)(null!==l&&void 0!==l&&l.bidder_list&&0!==(null===l||void 0===l?void 0:l.bidder_list.length)?v("bidder"):l.owner_id,16,"address")})})})}),!l.amount||null!==l&&void 0!==l&&l.bidder_list&&0===(null===l||void 0===l?void 0:l.bidder_list.length)?(0,T.jsxs)("p",{className:"ml-2 text-white",children:[m("Starting Bid")," ",(0,p.gL)((null===(t=l.price)||void 0===t?void 0:t.$numberDecimal)||l.price,24,2)," \u24c3"]}):(0,T.jsxs)("p",{className:"ml-2 text-white text-sm",children:[m("On Bid")," ",(0,p.gL)(null!==l&&void 0!==l&&l.bidder_list&&0!==(null===l||void 0===l||null===(n=l.bidder_list)||void 0===n?void 0:n.length)?v("amount"):null===l||void 0===l?void 0:l.price,24,2)," ","\u24c3"]})]})]}),(0,T.jsx)("div",{className:"mt-3 overflow-hidden",children:(0,T.jsx)("div",{className:"text-primary bg-gray-300 rounded-md py-1 px-2 text-xs font-bold whitespace-nowrap",children:"Current Bid"})})]})]})},se=function(e){var t,n=e.localToken,i=e.setAuctionEnds,a=void 0===i?function(){}:i,s=(0,c.useState)([]),r=s[0],l=s[1],o=(0,c.useState)("-"),u=o[0],m=o[1],x=(0,c.useState)("-"),v=x[0],h=x[1],f=(0,c.useState)("-"),_=f[0],j=f[1],b=(0,c.useState)("-"),g=b[0],w=b[1],N=(0,c.useState)(!1),k=N[0],S=N[1],E=(0,y.Y)().localeLn,A=(0,d.useRouter)(),C=(0,ie.Z)({key:"".concat(n.contract_id,"::").concat(n.token_series_id,"/").concat(n.token_id),initialData:n,args:{revalidateOnMount:!0,revalidateOnFocus:!0,revalidateIfStale:!0,revalidateOnReconnect:!0,refreshInterval:15e3}}).token;(0,c.useEffect)((function(){C.is_auction||(delete A.query.tab,A.push(A))}),[C]),(0,c.useEffect)((function(){var e=[];C.bidder_list&&C.bidder_list.length>0&&(e=[].concat((0,$.Z)(e),[C.bidder_list])),C.extend_list&&C.extend_list.length>0&&(e=[].concat((0,$.Z)(e),[C.extend_list]));var t=e.sort((function(e,t){return e.issued_at-t.issued_at}));l(t)}),[C]),(0,c.useEffect)((function(){Z(C.ended_at)}),[k]);var Z=function(e){var t=function(e){var t=String(e).slice(0,13);if("undefined"!==t)return t}(e),n=setInterval((function(){var e=(new Date).getTime();if(!k){var i=parseInt(t)-parseInt(e),s=Math.floor(i/864e5),r=Math.floor(i%864e5/36e5),c=Math.floor(i%36e5/6e4),l=Math.floor(i%6e4/1e3);m(s),h(r),j(c),w(l),i<0&&(clearInterval(n),S(!0),a(!0))}}))},I=function(e){var t=String(e).slice(0,13);if("undefined"!==t)return new Date(parseInt(t)).toUTCString().split("GMT")[0]};return(0,T.jsxs)("div",{className:"text-white",children:[(0,T.jsxs)("div",{className:"bg-gray-800 mt-3 p-3 rounded-md shadow-md",children:[(0,T.jsx)("p",{className:"text-xs",children:"Auction ends in:"}),(0,T.jsx)("div",{className:"text-center",children:k?(0,T.jsx)("p",{className:"text-base",children:"Auction is over."}):(0,T.jsxs)(T.Fragment,{children:[(0,T.jsxs)("p",{className:"text-base font-bold",children:[u," \xa0\xa0:\xa0\xa0 ",v," \xa0\xa0:\xa0\xa0 ",_," ","\xa0\xa0:\xa0\xa0 ",g]}),(0,T.jsx)("p",{className:"text-xs",children:"Days\xa0\xa0\xa0\xa0 Hours\xa0\xa0\xa0\xa0 Mins\xa0\xa0\xa0\xa0 Secs"})," "]})})]}),(0,T.jsx)(ae,{initial:C},C.token_id),(0,T.jsxs)("div",{className:"flex justify-center items-center relative",children:[(0,T.jsx)("p",{className:"text-center mt-2",children:"History Bids"}),(0,T.jsxs)("p",{className:"text-center text-xs mt-2 absolute right-0",children:["Total bid : ",(null===C||void 0===C||null===(t=C.bidder_list)||void 0===t?void 0:t.length)||0]})]}),r&&0!==(null===r||void 0===r?void 0:r.length)?null===r||void 0===r?void 0:r.slice(0).reverse().map((function(e){return(0,T.jsxs)("div",{children:[e.bidder&&(0,T.jsxs)("div",{className:"bg-gray-800 mt-3 p-3 rounded-md shadow-md",children:[(0,T.jsxs)("p",{children:[(0,T.jsx)(ee.Z,{accountId:e.bidder}),(0,T.jsxs)("span",{children:[" ",E("On Bid")," ",(0,p.gL)(e.amount,24,2)," \u24c3"]})]}),(0,T.jsxs)("p",{className:"mt-1 text-xs",children:[I(e.issued_at)," UTC"]})]}),e.ended_at&&(0,T.jsxs)("div",{className:"bg-gray-800 mt-3 p-3 rounded-md shadow-md text-sm",children:[(0,T.jsx)("p",{children:(0,T.jsxs)("span",{children:[" ",E("Auction Extended by ".concat(e.bidder," 5 minutes"))]})}),(0,T.jsxs)("p",{className:"mt-1 text-xs",children:[I(e.issued_at)," UTC"]})]})]},e._id)})):(0,T.jsx)("div",{className:"bg-gray-800 p-3 rounded-md shadow-md",children:(0,T.jsx)("div",{className:"text-white text-center",children:"No bidder at the moment"})})]})},re=n(14718),ce=n(39499),le=n.n(ce),oe=function(e){var t=e.data,n=e.show,i=e.onClose,s=e.onSuccess,l=(0,y.Y)().localeLn,o=(0,E.Z)().nearUsdPrice,d=(0,c.useState)(null),x=d[0],v=d[1],h=((null===x||void 0===x?void 0:x.next_fee)||0)>((null===x||void 0===x?void 0:x.current_fee)||0),f=l("DynamicTxFee",{date:(0,p.sG)(1e3*((null===x||void 0===x?void 0:x.start_time)||0)),fee:((null===x||void 0===x?void 0:x.current_fee)||0)/100}),_=(0,c.useState)(!1),j=_[0],g=_[1],k=(0,E.Z)((function(e){return{currentUser:e.currentUser,setTransactionRes:e.setTransactionRes}})),C=k.currentUser,Z=k.setTransactionRes,I=(0,A.p)();(0,c.useEffect)((function(){(function(){var e=(0,a.Z)(r().mark((function e(){var t;return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!n){e.next=5;break}return e.next=3,S.default.viewFunction({methodName:"get_transaction_fee",contractId:"marketplace.paras.near"});case 3:t=e.sent,v(t);case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}})()()}),[n]);var B=function(){var e=(0,a.Z)(r().mark((function e(){var t,n,i;return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,S.default.viewFunction({methodName:"storage_balance_of",contractId:"marketplace.paras.near",args:{account_id:C}});case 3:return t=e.sent,e.next=6,S.default.viewFunction({methodName:"get_supply_by_owner_id",contractId:"marketplace.paras.near",args:{account_id:C}});case 6:if(n=e.sent,i=le().multiply(le().BigInt(parseInt(n)+1),le().BigInt(w.STORAGE_ADD_MARKET_FEE)),!le().greaterThanOrEqual(le().BigInt(t),i)){e.next=10;break}return e.abrupt("return",!0);case 10:return e.abrupt("return",!1);case 13:e.prev=13,e.t0=e.catch(0),(0,N.p)(e.t0);case 16:case"end":return e.stop()}}),e,null,[[0,13]])})));return function(){return e.apply(this,arguments)}}(),F=function(){var e=(0,a.Z)(r().mark((function e(){var n,a,c,l,o,d,u;return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return g(!0),e.next=3,B();case 3:if(n=e.sent,e.prev=4,c={receiver_id:C},l={nft_contract_id:t.contract_id,token_id:t.token_id},!n){e.next=13;break}return e.next=10,S.default.signAndSendTransaction({receiverId:"marketplace.paras.near",actions:[{methodName:"accept_bid",args:l,deposit:"1",gas:w.GAS_FEE_150}]});case 10:o=e.sent,e.next=16;break;case 13:return e.next=15,S.default.signAndSendTransaction({receiverId:"marketplace.paras.near",actions:[{methodName:"storage_deposit",args:c,deposit:w.STORAGE_ADD_MARKET_FEE,gas:w.GAS_FEE_150},{methodName:"accept_bid",args:l,deposit:"1",gas:w.GAS_FEE_150}]});case 15:o=e.sent;case 16:null!==(a=o)&&void 0!==a&&a.response.error?I.show({text:(0,T.jsx)("div",{className:"font-semibold text-center text-sm",children:null===(d=o)||void 0===d?void 0:d.response.error.kind.ExecutionError}),type:"error",duration:2500}):o&&(i(),Z(null===(u=o)||void 0===u?void 0:u.response),s&&s(),I.show({text:(0,T.jsx)("div",{className:"font-semibold text-center text-sm",children:"Successfully accept bid auction"}),type:"success",duration:2500})),g(!1),e.next=24;break;case 20:e.prev=20,e.t0=e.catch(4),(0,N.p)(e.t0),g(!1);case 24:case"end":return e.stop()}}),e,null,[[4,20]])})));return function(){return e.apply(this,arguments)}}(),O=function(){if(void 0!==L("amount")&&le().greaterThan(le().BigInt(L("amount")),le().BigInt(0))){var e;e=null!==x&&void 0!==x&&x.start_time&&new Date>new Date(1e3*(null===x||void 0===x?void 0:x.start_time))?le().BigInt((null===x||void 0===x?void 0:x.next_fee)||0):le().BigInt((null===x||void 0===x?void 0:x.current_fee)||0);var n=Object.keys(t.royalty).length>0?le().divide(le().multiply(le().BigInt(L("amount")),le().BigInt(Object.values(t.royalty).reduce((function(e,t){return parseInt(e)+parseInt(t)}),0))),le().BigInt(1e4)):le().BigInt(0),i=le().divide(le().multiply(le().BigInt(L("amount")),e),le().BigInt(1e4)),a=le().add(n,i),s=le().subtract(le().BigInt(L("amount")),a);return{receive:(0,P.formatNearAmount)(s.toString()),royalty:(0,P.formatNearAmount)(n.toString()),fee:(0,P.formatNearAmount)(i.toString())}}return{receive:0,royalty:0,fee:0}},L=function(e){var n,i=[];return null===t||void 0===t||null===(n=t.bidder_list)||void 0===n||n.map((function(t){"amount"==e?i.push(t.amount):"bidder"==e&&i.push(t.bidder)})),i[i.length-1]};return(0,T.jsx)(T.Fragment,{children:(0,T.jsx)(b.Z,{isShow:n,closeOnBgClick:!1,closeOnEscape:!1,close:i,children:(0,T.jsx)("div",{className:"max-w-sm w-full p-4 bg-gray-800 m-auto rounded-md relative",children:(0,T.jsxs)("div",{children:[(0,T.jsx)("h1",{className:"text-2xl font-bold text-white tracking-tight",children:l("Accept Highest Bid")}),(0,T.jsxs)("p",{className:"text-white mt-2",children:[l("You are about to accept bid auction from ")," ",(0,T.jsx)("b",{children:L("bidder")})]}),(0,T.jsxs)("div",{className:"text-center",children:[(0,T.jsx)("div",{className:"text-white mt-4 text-2xl font-bold text-center",children:"".concat((0,p.gL)(L("amount"),24,4)," \u24c3 ")}),0!==o&&void 0!==L("amount")&&(0,T.jsxs)("div",{className:"text-xs text-gray-300 truncate",children:["$",(0,p.gL)(le().BigInt(L("amount"))*o,24,2)]})]}),(0,T.jsxs)("div",{className:"mt-4 text-center",children:[(0,T.jsxs)("div",{className:"flex items-center justify-between ".concat(h?"text-gray-300":"text-gray-200"),children:[(0,T.jsxs)("div",{className:"text-sm",children:[l("RoyaltyForArtist")," (",0===Object.keys(t.royalty).length?"None":"".concat(Object.values(t.royalty).reduce((function(e,t){return parseInt(e)+parseInt(t)}),0)/100,"%"),")"]}),(0,T.jsxs)("div",{children:[O().royalty," \u24c3"]})]}),(0,T.jsxs)("div",{className:"flex items-center justify-between ".concat(h?"font-bold text-white":"text-gray-200"),children:[(0,T.jsx)(z.Z,{id:"text-fee",show:h,text:f,className:"font-normal",children:(0,T.jsxs)("span",{children:[l("Fee"),h&&(0,T.jsx)(m.aU,{size:10,color:"#ffffff"}),":"]})}),(0,T.jsx)(z.Z,{id:"text-number",show:h,text:f,className:"font-normal",place:"left",children:(0,T.jsxs)("span",{children:[" ",O().fee," \u24c3"]})})]}),(0,T.jsxs)("div",{className:"flex items-center justify-between ".concat(h?"text-gray-300":"text-gray-200"),children:[(0,T.jsx)("div",{className:"text-sm",children:l("YouWillGet")}),(0,T.jsxs)("div",{children:[O().receive," \u24c3"]})]})]}),(0,T.jsx)("div",{className:"mt-4 text-center",children:(0,T.jsx)("div",{className:"text-white my-1",children:(0,T.jsxs)("div",{className:"flex items-center justify-between ".concat(h?"text-gray-300":"text-gray-200"),children:[(0,T.jsx)("div",{className:"text-sm",children:l("StorageFee")}),(0,T.jsxs)("div",{className:"text",children:[(0,P.formatNearAmount)(w.STORAGE_ADD_MARKET_FEE)," \u24c3"]})]})})}),(0,T.jsx)("p",{className:"text-white mt-4 text-sm text-center opacity-90 px-4",children:l("RedirectedToconfirm")}),t.is_staked&&(0,T.jsx)("p",{className:"text-sm text-center font-bold mt-2 -mb-2",children:"Please Unstake your token to accept offer"}),(0,T.jsxs)("div",{className:"",children:[(0,T.jsx)(u.Z,{size:"md",isFullWidth:!0,isDisabled:j,isLoading:j,className:"mt-4 rounded-md bg-transparent text-sm font-semibold border-2 px-4 py-2 border-primary bg-primary text-gray-100",onClick:F,children:"Accept Bid Auction"}),(0,T.jsx)(u.Z,{className:"mt-4",variant:"ghost",size:"md",isFullWidth:!0,onClick:i,isDisabled:j,children:l("Cancel")})]})]})})})})},de=function(e){var t=e.data,n=e.show,i=e.onClose,s=e.onSuccess,l=(0,y.Y)().localeLn,o=(0,c.useState)(!1),d=o[0],x=o[1],v=(0,E.Z)((function(e){return{currentUser:e.currentUser,setTransactionRes:e.setTransactionRes}})),h=v.currentUser,p=v.setTransactionRes,f=(0,A.p)(),_=function(){var e=(0,a.Z)(r().mark((function e(){var t,n,i;return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,S.default.viewFunction({methodName:"storage_balance_of",contractId:"marketplace.paras.near",args:{account_id:h}});case 3:return t=e.sent,e.next=6,S.default.viewFunction({methodName:"get_supply_by_owner_id",contractId:"marketplace.paras.near",args:{account_id:h}});case 6:if(n=e.sent,i=le().multiply(le().BigInt(parseInt(n)+1),le().BigInt(w.STORAGE_ADD_MARKET_FEE)),!le().greaterThanOrEqual(le().BigInt(t),i)){e.next=10;break}return e.abrupt("return",!0);case 10:return e.abrupt("return",!1);case 13:e.prev=13,e.t0=e.catch(0),(0,N.p)(e.t0);case 16:case"end":return e.stop()}}),e,null,[[0,13]])})));return function(){return e.apply(this,arguments)}}(),j=function(){var e=(0,a.Z)(r().mark((function e(){var n,a,c,l,o,d,u;return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return x(!0),e.next=3,_();case 3:if(n=e.sent,e.prev=4,c={receiver_id:h},l={nft_contract_id:t.contract_id,token_id:t.token_id,is_auction:!0},!n){e.next=13;break}return e.next=10,S.default.signAndSendTransaction({receiverId:"marketplace.paras.near",actions:[{methodName:"delete_market_data",args:l,gas:w.GAS_FEE,deposit:"1"}]});case 10:o=e.sent,e.next=16;break;case 13:return e.next=15,S.default.signAndSendTransaction({receiverId:"marketplace.paras.near",actions:[{methodName:"storage_deposit",args:c,gas:w.GAS_FEE,deposit:w.STORAGE_ADD_MARKET_FEE},{methodName:"delete_market_data",args:l,gas:w.GAS_FEE,deposit:"1"}]});case 15:o=e.sent;case 16:null!==(a=o)&&void 0!==a&&a.response.error?f.show({text:(0,T.jsx)("div",{className:"font-semibold text-center text-sm",children:null===(d=o)||void 0===d?void 0:d.response.error.kind.ExecutionError}),type:"error",duration:2500}):o&&(i(),p(null===(u=o)||void 0===u?void 0:u.response),s&&s(),f.show({text:(0,T.jsx)("div",{className:"font-semibold text-center text-sm",children:"Successfully remove auction"}),type:"success",duration:2500})),x(!1),e.next=24;break;case 20:e.prev=20,e.t0=e.catch(4),(0,N.p)(e.t0),x(!1);case 24:case"end":return e.stop()}}),e,null,[[4,20]])})));return function(){return e.apply(this,arguments)}}();return(0,T.jsx)(b.Z,{isShow:n,close:i,closeOnBgClick:!1,closeOnEscape:!1,children:(0,T.jsxs)("div",{className:"max-w-sm w-full p-4 bg-gray-800  m-auto rounded-md relative",children:[(0,T.jsx)("div",{className:"absolute right-0 top-0 pr-4 pt-4",children:(0,T.jsx)("div",{className:"cursor-pointer",onClick:i,children:(0,T.jsx)(m.kL,{})})}),(0,T.jsxs)("div",{children:[(0,T.jsx)("div",{className:"flex items-center space-x-2",children:(0,T.jsx)("h1",{className:"text-2xl font-bold text-white tracking-tight",children:"Remove Auction"})}),(0,T.jsxs)("p",{className:"text-white mt-2",children:[l("Are you sure to remove")," ",(0,T.jsx)("b",{children:null===t||void 0===t?void 0:t.metadata.title})," auction?"]}),(0,T.jsx)("p",{className:"text-white opacity-80 mt-4 text-sm text-center px-4",children:l("Removing the auction means that all bids that have been entered will be canceled too.")}),(0,T.jsx)("div",{className:"",children:(0,T.jsx)(u.Z,{disabled:d,isLoading:d,className:"mt-4",isFullWidth:!0,size:"md",type:"submit",variant:"error",onClick:j,children:l("Remove Auction")})})]})]})})},ue=function(e){var t=e.data,n=e.show,i=e.onClose,s=e.onSuccess,l=(0,y.Y)().localeLn,o=(0,c.useState)(!1),d=o[0],x=o[1],v=(0,E.Z)((function(e){return{currentUser:e.currentUser,setTransactionRes:e.setTransactionRes}})),h=v.currentUser,p=v.setTransactionRes,f=(0,A.p)(),_=function(){var e=(0,a.Z)(r().mark((function e(){var t,n,i;return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,S.default.viewFunction({methodName:"storage_balance_of",contractId:"marketplace.paras.near",args:{account_id:h}});case 3:return t=e.sent,e.next=6,S.default.viewFunction({methodName:"get_supply_by_owner_id",contractId:"marketplace.paras.near",args:{account_id:h}});case 6:if(n=e.sent,i=le().multiply(le().BigInt(parseInt(n)+1),le().BigInt(w.STORAGE_ADD_MARKET_FEE)),!le().greaterThanOrEqual(le().BigInt(t),i)){e.next=10;break}return e.abrupt("return",!0);case 10:return e.abrupt("return",!1);case 13:e.prev=13,e.t0=e.catch(0),(0,N.p)(e.t0);case 16:case"end":return e.stop()}}),e,null,[[0,13]])})));return function(){return e.apply(this,arguments)}}(),j=function(){var e=(0,a.Z)(r().mark((function e(){var n,a,c,l,o,d,u;return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return x(!0),e.next=3,_();case 3:if(n=e.sent,e.prev=4,c={receiver_id:h},l={nft_contract_id:t.contract_id,token_id:t.token_id,account_id:h},!n){e.next=13;break}return e.next=10,S.default.signAndSendTransaction({receiverId:"marketplace.paras.near",actions:[{methodName:"cancel_bid",args:l,deposit:"1",gas:w.GAS_FEE}]});case 10:o=e.sent,e.next=16;break;case 13:return e.next=15,S.default.signAndSendTransaction({receiverId:"marketplace.paras.near",actions:[{methodName:"storage_deposit",args:c,deposit:w.STORAGE_ADD_MARKET_FEE,gas:w.GAS_FEE},{methodName:"cancel_bid",args:l,deposit:"1",gas:w.GAS_FEE}]});case 15:o=e.sent;case 16:null!==(a=o)&&void 0!==a&&a.response.error?f.show({text:(0,T.jsx)("div",{className:"font-semibold text-center text-sm",children:null===(d=o)||void 0===d?void 0:d.response.error.kind.ExecutionError}),type:"error",duration:2500}):o&&(i(),p(null===(u=o)||void 0===u?void 0:u.response),s&&s(),f.show({text:(0,T.jsx)("div",{className:"font-semibold text-center text-sm",children:"Successfully cancel bid auction"}),type:"success",duration:2500})),x(!1),e.next=24;break;case 20:e.prev=20,e.t0=e.catch(4),(0,N.p)(e.t0),x(!1);case 24:case"end":return e.stop()}}),e,null,[[4,20]])})));return function(){return e.apply(this,arguments)}}();return(0,T.jsx)(T.Fragment,{children:(0,T.jsx)(b.Z,{isShow:n,close:i,closeOnBgClick:!1,closeOnEscape:!1,children:(0,T.jsxs)("div",{className:"max-w-sm w-full p-4 bg-gray-800  m-auto rounded-md relative",children:[(0,T.jsx)("div",{className:"absolute right-0 top-0 pr-4 pt-4",children:(0,T.jsx)("div",{className:"cursor-pointer",onClick:i,children:(0,T.jsx)(m.kL,{})})}),(0,T.jsxs)("div",{children:[(0,T.jsx)("div",{className:"flex items-center space-x-2",children:(0,T.jsx)("h1",{className:"text-2xl font-bold text-white tracking-tight",children:"Cancel Bid"})}),(0,T.jsxs)("p",{className:"text-white mt-2",children:[l("Are you sure to cancel bid")," ",(0,T.jsx)("b",{children:null===t||void 0===t?void 0:t.metadata.title}),"?"]}),(0,T.jsx)("div",{className:"",children:(0,T.jsx)(u.Z,{disabled:d,isLoading:d,className:"mt-4",isFullWidth:!0,size:"md",type:"submit",variant:"error",onClick:j,children:l("Remove Bid")})})]})]})})})},me=n(56601);function xe(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}function ve(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?xe(Object(n),!0).forEach((function(t){(0,i.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):xe(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var he=function(e){var t,n,i,s,b,w,N,Y,H,$,X,Q=e.token,ee=e.className,te=e.isAuctionEnds,ne=(0,c.useState)("info"),ie=ne[0],ae=ne[1],ce=(0,c.useState)(null),xe=ce[0],he=ce[1],pe=(0,c.useState)("detail"),fe=pe[0],_e=pe[1],je=(0,c.useState)(!1),be=je[0],ge=je[1],we=(0,c.useState)(!1),Ne=we[0],ye=we[1],ke=(0,c.useState)(0),Se=ke[0],Ee=ke[1],Ae=(0,E.Z)((function(e){return e.currentUser})),Ce=(0,y.Y)().localeLn,Te=(0,E.Z)(),Ze=(0,d.useRouter)(),Ie=(0,c.useState)(""),Be=Ie[0],Fe=Ie[1],Oe=(0,c.useState)(!1),Le=Oe[0],Re=Oe[1],De=(0,c.useState)(null===Q||void 0===Q||null===(t=Q.metadata)||void 0===t?void 0:t.mime_type),Ue=De[0],Me=De[1],Ge=(0,A.p)();(0,c.useEffect)((function(){null!==Q&&void 0!==Q&&Q.total_likes&&(Q.likes&&ye(!0),Ee(null===Q||void 0===Q?void 0:Q.total_likes))}),[JSON.stringify(Q)]),(0,c.useEffect)((function(){ae("info")}),[te]);(0,c.useEffect)((function(){ze(Ze.query.tab)}),[Ze.query.tab]),(0,c.useEffect)((function(){var e,t,n,i,a;null!==Q&&void 0!==Q&&null!==(e=Q.metadata)&&void 0!==e&&e.animation_url&&Q.metadata.mime_type.includes("model")&&He(null===Q||void 0===Q||null===(i=Q.metadata)||void 0===i?void 0:i.animation_url);null!==Q&&void 0!==Q&&null!==(t=Q.metadata)&&void 0!==t&&t.animation_url&&Q.metadata.mime_type.includes("audio")&&Ve(null===Q||void 0===Q||null===(a=Q.metadata)||void 0===a?void 0:a.animation_url);null!==Q&&void 0!==Q&&null!==(n=Q.metadata)&&void 0!==n&&n.animation_url&&Q.metadata.mime_type.includes("iframe")&&$e()}),[]);var ze=function(e){switch(e){case"auction":ae("auction");break;case"owners":ae("owners");break;case"history":ae("history");break;case"offers":ae("offers");break;case"publication":ae("publication");break;default:ae("info")}},Pe=function(e){return(0,T.jsx)("div",{className:"cursor-pointer relative text-center ".concat(ie===e?"text-gray-100 border-b-2 border-white font-semibold":"hover:bg-opacity-15 text-gray-100"),onClick:function(){"auction"===e&&(0,C.JG)("".concat(Q.contract_id,"::").concat(Q.token_series_id,"/").concat(Q.token_id)),function(e){ae(e)}(e)},children:(0,T.jsx)("div",{className:"capitalize",children:Ce((0,p.kC)(e))})})},We=function(){he(null)},Ye=function(){he(Ae?"transfer":"notLogin")},qe=function(){he("removeauction")},Ke=function(){he(Ae?"placeoffer":"notLogin")},Je=function(){return!!Ae&&Ae===Q.owner_id},He=function(){var e=(0,a.Z)(r().mark((function e(t){var n,i,a;return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,q().get("".concat((0,p.pf)(t,void 0)),{responseType:"blob"});case 2:return n=e.sent,e.next=5,V().fromBlob(n.data);case 5:i=e.sent,Me(null===i||void 0===i?void 0:i.mime),a=URL.createObjectURL(n.data),Fe(a);case 9:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),Ve=function(){var e=(0,a.Z)(r().mark((function e(t){var n,i;return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,q().get("".concat((0,p.pf)(t,void 0)),{responseType:"blob"});case 2:return n=e.sent,e.next=5,V().fromBlob(n.data);case 5:i=e.sent,Me(null===i||void 0===i?void 0:i.mime);case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),$e=function(){var e;Me(null===Q||void 0===Q||null===(e=Q.metadata)||void 0===e?void 0:e.mime_type)},Xe=function(e){var t,n=[];return null===Q||void 0===Q||null===(t=Q.bidder_list)||void 0===t||t.map((function(t){"bidder"===e?n.push(t.bidder):"time"===e?n.push(t.issued_at):"amount"===e&&n.push(t.amount)})),n[n.length-1]},Qe=function(e){var t;if(null!==Q&&void 0!==Q&&Q.bidder_list&&0!==(null===Q||void 0===Q||null===(t=Q.bidder_list)||void 0===t?void 0:t.length)){var n,i=le().BigInt(null!==Q&&void 0!==Q&&Q.bidder_list&&0!==(null===Q||void 0===Q||null===(n=Q.bidder_list)||void 0===n?void 0:n.length)?Xe("amount"):null===Q||void 0===Q?void 0:Q.price),a=le().multiply(le().divide(i,le().BigInt(100)),le().BigInt(5)),s=(le().add(i,a).toString()/Math.pow(10,24)).toFixed(2),r=(0,P.parseNearAmount)(s.toString());if("near"===e)return s;if("usd"===e)return r.toString()}else{if("near"===e)return(0,P.formatNearAmount)(null===Q||void 0===Q?void 0:Q.price);if("usd"===e)return((null===Q||void 0===Q?void 0:Q.price)||(null===Q||void 0===Q?void 0:Q.lowest_price)).toString()}},et=function(){var e=(0,a.Z)(r().mark((function e(t,n,i){var a,s;return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(Ae){e.next=3;break}return he("notLogin"),e.abrupt("return");case 3:return ye(!0),Ee(Se+1),a={account_id:Ae},e.t0=q(),e.t1="".concat("https://api-v2-mainnet.paras.id","/like/").concat(t,"/").concat(n),e.t2=a,e.next=11,S.default.authToken();case 11:return e.t3=e.sent,e.t4={authorization:e.t3},e.t5={headers:e.t4},e.next=16,e.t0.put.call(e.t0,e.t1,e.t2,e.t5);case 16:if(s=e.sent,(0,C.JG)("".concat(Q.contract_id,"::").concat(Q.token_series_id)),(0,C.JG)("".concat(Q.contract_id,"::").concat(Q.token_series_id,"/").concat(Q.token_id)),200===s.status){e.next=23;break}return ye(!1),Ee(Se-1),e.abrupt("return");case 23:(0,k.CG)("".concat(t,"::").concat(n),i);case 24:case"end":return e.stop()}}),e)})));return function(t,n,i){return e.apply(this,arguments)}}(),tt=function(){var e=(0,a.Z)(r().mark((function e(t,n,i){var a,s;return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(Ae){e.next=3;break}return he("notLogin"),e.abrupt("return");case 3:return ye(!1),Ee(Se-1),a={account_id:Ae},e.t0=q(),e.t1="".concat("https://api-v2-mainnet.paras.id","/unlike/").concat(t,"/").concat(n),e.t2=a,e.next=11,S.default.authToken();case 11:return e.t3=e.sent,e.t4={authorization:e.t3},e.t5={headers:e.t4},e.next=16,e.t0.put.call(e.t0,e.t1,e.t2,e.t5);case 16:if(s=e.sent,(0,C.JG)("".concat(Q.contract_id,"::").concat(Q.token_series_id)),(0,C.JG)("".concat(Q.contract_id,"::").concat(Q.token_series_id,"/").concat(Q.token_id)),200===s.status){e.next=23;break}return ye(!0),Ee(Se+1),e.abrupt("return");case 23:(0,k.h2)("".concat(t,"::").concat(n),i);case 24:case"end":return e.stop()}}),e)})));return function(t,n,i){return e.apply(this,arguments)}}();return(0,T.jsxs)("div",{className:"m-auto rounded-lg overflow-hidden ".concat(ee),children:[(0,T.jsxs)("div",{className:"flex flex-col lg:flex-row h-90vh lg:h-80vh",children:[(0,T.jsxs)("div",{className:"w-full h-1/2 lg:h-full lg:w-3/5 relative bg-dark-primary-1 ",children:[(0,T.jsx)("div",{className:"absolute inset-0 opacity-75",children:Q.metadata.blurhash&&(0,T.jsx)(l.E,{hash:Q.metadata.blurhash||"",width:"100%",height:"100%",resolutionX:32,resolutionY:32,punch:1})}),(0,T.jsxs)("div",{className:"w-full h-full flex items-center justify-center p-2 lg:p-12 relative",children:["detail"===fe?(0,T.jsxs)("div",{className:"relative h-full w-full",onDoubleClick:function(){Ae&&(Re(!0),!Ne&&et(Q.contract_id,Q.token_series_id,"double_click_detail"),setTimeout((function(){return Re(!1)}),1e3))},children:[null!==Q&&void 0!==Q&&null!==(n=Q.metadata)&&void 0!==n&&n.animation_url?(0,T.jsxs)(T.Fragment,{children:[(null===Ue||void 0===Ue?void 0:Ue.includes("audio"))&&(0,T.jsxs)("div",{className:"max-h-80 md:max-h-52 lg:max-h-96 w-full mx-2 md:mx-0",children:[(0,T.jsx)("div",{className:"w-1/2 md:w-full h-full m-auto",children:(0,T.jsx)(U.Z,{className:"rounded-lg overflow-hidden max-h-80 md:max-h-52 lg:max-h-96",url:null!==(i=Q.metadata)&&void 0!==i&&i.mime_type?(0,p.pf)(Q.metadata.media):Q.metadata.media,videoControls:!0,videoLoop:!0,videoMuted:!0,videoPadding:!0,mimeType:null===Q||void 0===Q||null===(s=Q.metadata)||void 0===s?void 0:s.mime_type,seeDetails:!0,isMediaCdn:null===Q||void 0===Q?void 0:Q.isMediaCdn})}),(0,T.jsx)("div",{className:"w-full m-auto",children:(0,T.jsx)("div",{className:"my-3 flex items-center justify-center w-full",children:(0,T.jsx)("audio",{controls:!0,className:"w-full",children:(0,T.jsx)("source",{src:(0,p.pf)(null===Q||void 0===Q?void 0:Q.metadata.animation_url)})})})})]}),(null===Ue||void 0===Ue?void 0:Ue.includes("model"))&&Be&&(0,T.jsx)(c.Suspense,{fallback:(0,T.jsx)("div",{className:"flex h-full w-full items-center justify-center",children:(0,T.jsx)(m.pA,{})}),children:(0,T.jsx)(K.Xz,{children:(0,T.jsx)(J.W,{threeDUrl:Be})})}),(null===Ue||void 0===Ue?void 0:Ue.includes("iframe"))&&(0,T.jsx)("iframe",{src:null===Q||void 0===Q?void 0:Q.metadata.animation_url,className:"object-contain w-full h-full"}),!Ue&&(0,T.jsx)(U.Z,{className:"rounded-lg overflow-hidden",url:null!==(b=Q.metadata)&&void 0!==b&&b.mime_type?(0,p.pf)(Q.metadata.media):Q.metadata.media,videoControls:!0,videoLoop:!0,videoMuted:!0,videoPadding:!0,mimeType:null===Q||void 0===Q||null===(w=Q.metadata)||void 0===w?void 0:w.mime_type,seeDetails:!0,isMediaCdn:null===Q||void 0===Q?void 0:Q.isMediaCdn,animationUrlforVideo:null===Q||void 0===Q||null===(N=Q.metadata)||void 0===N?void 0:N.animation_url})]}):(0,T.jsx)(U.Z,{className:"rounded-lg overflow-hidden",url:null!==(Y=Q.metadata)&&void 0!==Y&&Y.mime_type?(0,p.pf)(Q.metadata.media):Q.metadata.media,videoControls:!0,videoLoop:!0,videoMuted:!0,videoPadding:!1,mimeType:null===Q||void 0===Q||null===(H=Q.metadata)||void 0===H?void 0:H.mime_type,seeDetails:!0,isMediaCdn:null===Q||void 0===Q?void 0:Q.isMediaCdn,animationUrlforVideo:null===Q||void 0===Q||null===($=Q.metadata)||void 0===$?void 0:$.animation_url}),Le&&(0,T.jsx)("div",{className:"absolute inset-0 flex items-center justify-center z-10",children:(0,T.jsx)(me.Z,{className:"love-container",color:"#ffffff",size:"20%"})})]}):(0,T.jsx)("div",{className:"w-1/2 h-full md:w-full m-auto flex items-center",children:(0,T.jsx)(G.Z,{imgUrl:(0,p.pf)(Q.metadata.media,null,{width:"600",useOriginal:!1,isMediaCdn:Q.isMediaCdn}),audioUrl:Q.metadata.mime_type&&Q.metadata.mime_type.includes("audio")&&(null===(X=Q.metadata)||void 0===X?void 0:X.animation_url),threeDUrl:Q.metadata.mime_type&&Q.metadata.mime_type.includes("model")&&Q.metadata.animation_url,iframeUrl:Q.metadata.mime_type&&Q.metadata.mime_type.includes("iframe")&&Q.metadata.animation_url,imgBlur:Q.metadata.blurhash,token:{title:Q.metadata.title,collection:Q.metadata.collection||Q.contract_id,copies:Q.metadata.copies,creatorId:Q.metadata.creator_id||Q.contract_id,is_creator:Q.is_creator,mime_type:Q.metadata.mime_type}})}),(0,T.jsxs)("div",{className:"absolute top-0 right-0 text-white p-4 text-sm",children:[(0,T.jsx)("span",{className:"cursor-pointer ".concat("detail"===fe?"font-bold":""),onClick:function(){return _e("detail")},children:"Detail"}),(0,T.jsx)("span",{children:" / "}),(0,T.jsx)("span",{className:"cursor-pointer ".concat("card"===fe?"font-bold":""),onClick:function(){return _e("card")},children:"Card"})]})]}),(0,T.jsx)(O.Z,{creatorId:Q.metadata.creator_id})]}),(0,T.jsxs)("div",{className:"h-1/2 lg:h-full flex flex-col w-full lg:w-2/5 lg:max-w-2xl bg-gray-700",children:[(0,T.jsx)(o.ZP,{className:"h-full",universal:!0,renderView:function(e){return(0,T.jsx)("div",ve(ve({},e),{},{id:"activityListScroll",className:"p-4"}))},children:(0,T.jsxs)("div",{children:[(0,T.jsxs)("div",{className:"flex justify-between",children:[(0,T.jsxs)("div",{className:"overflow-x-hidden",children:[(0,T.jsx)("div",{className:"flex justify-between items-center",children:(0,T.jsxs)("p",{className:"text-gray-300 truncate",children:["NFT //"," ","x.paras.near"===Q.contract_id?"#".concat(Q.edition_id," of ").concat(Q.metadata.copies):"#".concat(Q.token_id)]})}),(0,T.jsx)("h1",{className:"mt-2 text-xl md:text-2xl font-bold text-white tracking-tight pr-4 break-all",children:Q.metadata.title}),(0,T.jsxs)("div",{className:"mt-1 text-white flex",children:[(0,T.jsx)("p",{className:"mr-1",children:Ce("by")}),(0,T.jsx)(F.Z,{token:Q})]})]}),(0,T.jsxs)("div",{className:"flex flex-col items-end",children:[(0,T.jsx)(m.jg,{color:"#ffffff",className:"cursor-pointer mb-1",onClick:function(){return he("more")}}),(0,T.jsxs)("div",{className:"w-full flex flex-col items-center justify-center",children:[(0,T.jsx)("div",{className:"cursor-pointer",onClick:function(){Ne?tt(Q.contract_id,Q.token_series_id,"detail"):et(Q.contract_id,Q.token_series_id,"detail")},children:(0,T.jsx)(me.Z,{size:17,color:Ne?"#c51104":"transparent",stroke:Ne?"none":"white"})}),(0,T.jsx)("p",{className:"text-white text-center text-sm",children:(0,p.NU)(null!==Se&&void 0!==Se?Se:0,1)})]}),Q.is_staked&&(0,T.jsx)(z.Z,{id:"text-staked",show:!0,text:"The NFT is being staked by the owner",className:"font-bold bg-gray-800 text-white",children:(0,T.jsx)("span",{className:"bg-white text-primary font-bold rounded-full px-3 py-1 text-sm",style:{boxShadow:"rgb(83 97 255) 0px 0px 5px 1px"},children:"staked"})})]})]}),(0,T.jsxs)("div",{className:"flex mt-3 overflow-x-scroll space-x-4 flex-grow relative overflow-scroll flex-nowrap disable-scrollbars md:-mb-4",children:[Pe("info"),Q.is_auction&&!te&&Pe("auction"),Pe("owners"),(!Q.is_auction||te)&&Pe("offers"),Pe("history"),Pe("publication")]}),"info"===ie&&(0,T.jsx)(x.Z,{localToken:Q,isNFT:!0}),"auction"===ie&&(0,T.jsx)(se,{localToken:Q,setAuctionEnds:function(){return ge(!0)}}),"owners"===ie&&(0,T.jsx)(v.Z,{localToken:Q,isAuctionEnds:te}),"offers"===ie&&(0,T.jsx)(L.Z,{localToken:Q}),"history"===ie&&(0,T.jsx)(B.Z,{localToken:Q}),"publication"===ie&&(0,T.jsx)(D.Z,{localToken:Q})]})}),(0,T.jsxs)("div",{className:"p-3",children:[null!==Q&&void 0!==Q&&Q.is_auction?(0,T.jsx)("div",{children:Q.owner_id!==Ae||te||be?!te&&!be&&(0,T.jsxs)("div",{className:"flex justify-between items-center gap-2",children:[(0,T.jsx)("div",{className:"flex items-baseline space-x-1 md:pl-2",children:(0,T.jsxs)("div",{children:[(0,T.jsx)("p",{className:"font-thin text-white text-xs",children:null!==Q&&void 0!==Q&&Q.bidder_list&&0!==(null===Q||void 0===Q?void 0:Q.bidder_list.length)?"Next Bid":"First Bid"}),(0,T.jsxs)("div",{className:"flex items-center gap-1",children:[(0,T.jsx)("div",{className:"truncate text-white text-base font-bold",children:"".concat((0,p.gL)(Qe("near"),0,4)," \u24c3")}),"0"!==Q.price&&0!==Te.nearUsdPrice&&(0,T.jsxs)("div",{className:"text-[9px] text-gray-400 truncate mt-1",children:["~ $",(0,p.gL)(le().BigInt(Qe("usd"))*Te.nearUsdPrice,24,2)]})]})]})}),(0,T.jsxs)("div",{className:"flex",children:[Q.owner_id!==Ae&&Xe("bidder")!==Ae&&(0,T.jsx)(u.Z,{size:"md",onClick:function(){(0,C.JG)("".concat(Q.contract_id,"::").concat(Q.token_series_id,"/").concat(Q.token_id)),he(Ae?"placeauction":"notLogin")},className:"px-6 mr-2",children:"Place a Bid"}),Q.owner_id!==Ae&&function(){var e,t=[];return null===Q||void 0===Q||null===(e=Q.bidder_list)||void 0===e||e.map((function(e){e.bidder===Ae&&t.push(e.bidder)})),t[0]}()&&(0,T.jsx)(u.Z,{size:"md",onClick:function(){he("cancelbid")},isFullWidth:!0,variant:"error",children:"Cancel Bid"})]})]}):(0,T.jsx)(T.Fragment,{children:(0,T.jsxs)("div",{className:"flex justify-between items-center gap-2",children:[(0,T.jsx)("div",{className:"flex items-baseline space-x-1 md:pl-2",children:(0,T.jsxs)("div",{children:[(0,T.jsx)("p",{className:"font-thin text-white text-xs",children:null!==Q&&void 0!==Q&&Q.bidder_list&&0!==(null===Q||void 0===Q?void 0:Q.bidder_list.length)?"Next Bid":"First Bid"}),(0,T.jsxs)("div",{className:"flex items-center gap-1",children:[(0,T.jsx)("div",{className:"truncate text-white text-base font-bold",children:"".concat((0,p.gL)(Qe("near"),0,4)," \u24c3")}),"0"!==Q.price&&0!==Te.nearUsdPrice&&(0,T.jsxs)("div",{className:"text-[9px] text-gray-400 truncate mt-1",children:["~ $",(0,p.gL)(le().BigInt(Qe("usd"))*Te.nearUsdPrice,24,2)]}),"0"===Q.price&&(null===Q||void 0===Q?void 0:Q.is_auction)&&!te&&(0,T.jsxs)("div",{className:"text-[9px] text-gray-400 truncate mt-1",children:["~ $",(0,p.gL)(le().BigInt(null!==Q&&void 0!==Q&&Q.amount?null===Q||void 0===Q?void 0:Q.amount:Q.price)*Te.nearUsdPrice,24,2)]})]})]})}),null!==Q&&void 0!==Q&&Q.bidder_list&&null!==Q&&void 0!==Q&&Q.is_auction&&!te?(0,T.jsxs)("div",{className:"flex",children:[0!==(null===Q||void 0===Q?void 0:Q.bidder_list.length)&&(0,T.jsx)(u.Z,{size:"md",className:"px-4 mr-2",onClick:function(){he("acceptbidauction")},children:"Accept Bid"}),(0,T.jsx)(u.Z,{size:"md",className:"px-2",variant:"error",onClick:qe,children:"Remove Auction"})]}):(0,T.jsx)(u.Z,{size:"md",className:"px-4",variant:"error",onClick:qe,children:"Remove Auction"})]})})}):Q.is_staked&&Ae===Q.owner_id?(0,T.jsx)("div",{className:"flex flex-wrap flex-col",children:(0,T.jsx)("div",{className:"w-full flex-1",children:(0,T.jsx)(u.Z,{size:"md",isFullWidth:!0,onClick:function(){window.location.href="https://stake.paras.id"},children:Ce("Unstake")})})}):Q.owner_id===Ae&&!te&&(0,T.jsxs)("div",{className:"flex flex-wrap space-x-4",children:[(0,T.jsx)("div",{className:"w-full flex-1",children:(0,T.jsx)(u.Z,{size:"md",onClick:function(){return he("updatePrice")},isFullWidth:!0,children:Ce("UpdateListing")})}),(0,T.jsx)("div",{className:"w-full flex-1",children:(0,T.jsx)(u.Z,{size:"md",onClick:Ye,isFullWidth:!0,children:Ce("Transfer")})})]}),Q.owner_id!==Ae&&Q.price&&!Q.is_auction&&(0,T.jsxs)("div",{className:"flex space-x-2",children:[(0,T.jsx)(u.Z,{size:"md",className:"truncate",onClick:function(){he(Ae?"buy":"notLogin")},isFullWidth:!0,children:"Buy for ".concat((0,P.formatNearAmount)(Q.price)," \u24c3")}),(0,T.jsx)(u.Z,{size:"md",onClick:Ke,isFullWidth:!0,variant:"secondary",children:"Place an offer"})]}),Q.owner_id!==Ae&&!Q.price&&(0,T.jsx)(u.Z,{size:"md",onClick:Ke,isFullWidth:!0,variant:"secondary",children:"Place an offer"}),(te||be)&&(0,T.jsx)("div",{className:"flex justify-center items-center gap-2 text-white text-center mt-2 rounded-md p-2",children:(0,T.jsxs)("div",{className:"flex items-center",children:[(0,T.jsx)("h4",{children:"Auction Ends.."}),(0,T.jsx)("div",{className:"pl-1",onClick:function(){Ge.show({text:(0,T.jsx)("div",{className:"text-sm text-white text-justify",children:(0,T.jsx)("p",{children:"This auction data is being updated, please refresh the page periodically each minute."})}),type:"updatingAuction",duration:null})},children:(0,T.jsx)(m.aU,{size:16,className:"cursor-pointer hover:opacity-80 -mt-1"})})]})}),Q.token_series_id!==Q.token_id&&(0,T.jsx)("div",{className:"mt-2 text-center text-white cursor-pointer hover:opacity-80 text-sm",size:"md",variant:"ghosts",onClick:function(){return Ze.push("/token/".concat(Q.contract_id,"::").concat(Q.token_series_id))},children:Ce("SeeTokenSeries")})]})]})]}),(0,T.jsx)(f.Z,{show:"more"===xe,onClose:We,listModalItem:[{name:"Share to...",onClick:function(){he("share")}},!Je()&&!Q.is_staked&&{name:"Offer Via NFT",onClick:function(){he(Ae?"placeofferNFT":"notLogin")}},Je()&&!Q.is_staked&&{name:"Update Listing",onClick:function(){he("updatePrice")}},Je()&&!Q.is_staked&&{name:"Transfer",onClick:Ye},Je()&&!Q.is_staked&&{name:"Burn Card",onClick:function(){he(Ae?"burn":"notLogin")}},{name:"Report",onClick:function(){return he("report")}}].filter((function(e){return e}))}),(0,T.jsx)(_.Z,{show:"share"===xe,onClose:We,tokenData:Q}),(0,T.jsx)(j.Z,{show:"updatePrice"===xe,onClose:We,data:Q}),(0,T.jsx)(Z,{show:"burn"===xe,onClose:We,data:Q}),(0,T.jsx)(h.Z,{show:"buy"===xe,onClose:We,data:Q}),(0,T.jsx)(I.Z,{show:"transfer"===xe,onClose:We,data:Q}),(0,T.jsx)(re.Z,{show:"placeauction"===xe,data:Q,onClose:We,setShowModal:he}),(0,T.jsx)(oe,{show:"acceptbidauction"===xe,data:Q,onClose:We,setShowModal:he}),(0,T.jsx)(de,{show:"removeauction"===xe,data:Q,onClose:We,setShowModal:he}),(0,T.jsx)(ue,{show:"cancelbid"===xe,data:Q,onClose:We,setShowModal:he}),(0,T.jsx)(R.Z,{show:"placeoffer"===xe,data:Q,onClose:We,setShowModal:he}),(0,T.jsx)(W.Z,{show:"placeofferNFT"===xe,data:Q,onClose:We,tokenType:"token"}),(0,T.jsx)(M.Z,{show:"report"===xe,data:Q,onClose:We}),(0,T.jsx)(g.Z,{show:"notLogin"===xe,onClose:We})]})}}}]);
//# sourceMappingURL=2306-09b8f7256a35f32c6f5d.js.map
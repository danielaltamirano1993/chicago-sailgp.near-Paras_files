"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[7917],{17982:function(t,e,n){var i=n(92809),a=n(30266),r=n(809),o=n.n(r),s=n(67294),c=n(52450),l=n(81941),d=n(41664),u=n(31427),m=n(11163),p=n(39499),f=n.n(p),v=n(58533),x=n(9669),_=n.n(x),h=n(35277),k=n(7570),b=n(39430),y=n(55404),g=n(31049),j=n(44303),w=n(77547),N=n(61522),O=n(64672),S=n(56601),P=n(3413),Z=n(12954),E=n(85893);function C(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,i)}return n}function D(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?C(Object(n),!0).forEach((function(e){(0,i.Z)(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):C(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}e.Z=function(t){var e=t.name,n=void 0===e?"default":e,i=t.tokens,a=t.fetchData,r=t.hasMore,o=t.profileCollection,c=t.type,l=t.displayType,d=void 0===l?"large":l,m=t.showLike,p=void 0!==m&&m,f=(0,u.Z)(),x=(0,s.useRef)(),_=(0,s.useRef)(f.marketScrollPersist[n]),h=(0,k.Y)().localeLn;(0,s.useEffect)((function(){_.current=f.marketScrollPersist[n]}),[f.marketScrollPersist[n]]),(0,s.useEffect)((function(){return function(){x.current&&x.current.removeEventListener("wheel",b)}}),[x,f.marketScrollPersist[n]]);var b=function(t){t.preventDefault();var e=t.deltaY?t.deltaY:t.deltaX,n=Math.floor(e),i=_.current||0;g(i-n)},g=function(t){var e=-(x.current.lastElementChild.scrollWidth-x.current.offsetWidth);t>0?f.setMarketScrollPersist(n,0):t<e?(a(),f.setMarketScrollPersist(n,e)):f.setMarketScrollPersist(n,t)};return(0,E.jsxs)("div",{ref:x,className:"rounded-md p-4 md:p-0",children:[0===i.length&&!r&&(0,E.jsx)("div",{className:"w-full",children:(0,E.jsxs)("div",{className:"m-auto text-2xl text-gray-600 font-semibold py-32 text-center",children:[(0,E.jsx)("div",{className:"w-40 m-auto",children:(0,E.jsx)("img",{src:"/cardstack.png",className:"opacity-75"})}),(0,E.jsx)("p",{className:"mt-4",children:h("NoCards")})]})}),(0,E.jsx)(v.Z,{dataLength:i.length,next:a,hasMore:r,loader:"large"===d?(0,E.jsx)(y.Z,{length:4}):(0,E.jsx)(w.Z,{length:6}),className:"-mx-4",children:(0,E.jsx)("div",{className:"flex flex-wrap select-none",children:i.map((function(t,e){return(0,E.jsx)(L,{_token:t,profileCollection:o,displayType:d,type:c,showLike:p},"".concat(t.contract_id,"::").concat(t.token_series_id,"-").concat(d,"-").concat(e))}))})})]})};var L=function(t){var e,n,i,r,p,v,x,y,w,C,L,I,A,M,T,U,B,z,q,R,Y,F,J,W,G,H=t._token,X=t.profileCollection,$=t.type,K=t.displayType,Q=void 0===K?"large":K,V=t.showLike,tt=(0,u.Z)((function(t){return t.currentUser})),et=(0,N.Z)({key:"".concat(H.contract_id,"::").concat(H.token_series_id),initialData:H,params:{lookup_likes:!0,liked_by:tt}}),nt=et.token,it=et.mutate,at=(0,u.Z)(),rt=(0,m.useRouter)(),ot=(0,s.useState)(null),st=ot[0],ct=ot[1],lt=(0,s.useState)(null),dt=lt[0],ut=lt[1],mt=(0,s.useState)(!1),pt=mt[0],ft=mt[1],vt=(0,s.useState)(0),xt=vt[0],_t=vt[1],ht=(0,s.useState)(!1),kt=ht[0],bt=ht[1],yt=(0,k.Y)().localeLn,gt=(0,O.p)(),jt=null!==(e=nt.token)&&void 0!==e&&e.amount&&null!==(n=nt.token)&&void 0!==n&&n.bidder_list&&0!==(null===(i=nt.token)||void 0===i?void 0:i.bidder_list.length)?null===(r=nt.token)||void 0===r?void 0:r.amount:nt.lowest_price||nt.price,wt=(0,s.useState)(!1),Nt=wt[0],Ot=wt[1],St=function(){gt.show({text:(0,E.jsx)("div",{className:"text-sm text-white text-justify",children:(0,E.jsx)("p",{children:"This auction data is being updated, please refresh the page periodically each minute."})}),type:"updatingAuction",duration:null})};(0,s.useEffect)((function(){Pt()}),[Nt]),(0,s.useEffect)((function(){void 0!==nt.total_likes&&(nt.likes?ft(!0):ft(!1),_t(nt.total_likes))}),[JSON.stringify(nt)]);var Pt=function(){var t,e=function(t){var e=String(t).slice(0,13);if("undefined"!==e)return e}(null===(t=nt.token)||void 0===t?void 0:t.ended_at),n=setInterval((function(){var t=(new Date).getTime();Nt||parseInt(e)-parseInt(t)<=0&&(clearInterval(n),Ot(!0))}),1e3)},Zt=function(){var t=(0,a.Z)(o().mark((function t(e,n){var i,a;return o().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,it();case 2:if(t.t0=t.sent,t.t0){t.next=5;break}t.t0=e;case 5:if(i=t.t0,a=null===i||void 0===i?void 0:i.token,!navigator.userAgent.includes("iPhone")){t.next=11;break}return rt.push("/token/".concat(i.contract_id,"::").concat(i.token_series_id)),t.abrupt("return");case 11:rt.push({pathname:rt.pathname,query:D(D(D({},rt.query),n),{},{contractId:i.contract_id,tokenSeriesId:i.token_series_id,tokenId:(null===a||void 0===a?void 0:a.token_id)||""})},"/token/".concat(i.contract_id,"::").concat(i.token_series_id,"/").concat((null===a||void 0===a?void 0:a.token_id)||""),{shallow:!0,scroll:!1});case 12:case"end":return t.stop()}}),t)})));return function(e,n){return t.apply(this,arguments)}}(),Et=function(t){var e,n,i=[];return null===(e=nt.token)||void 0===e||null===(n=e.bidder_list)||void 0===n||n.map((function(e){"bidder"===t?i.push(e.bidder):"time"===t?i.push(e.issued_at):"amount"===t&&i.push(e.amount)})),i.reverse()[0]},Ct=function(){var t=(0,a.Z)(o().mark((function t(e,n,i){var a;return o().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(tt){t.next=3;break}return bt(!0),t.abrupt("return");case 3:return ft(!0),_t(xt+1),a={account_id:tt},t.t0=_(),t.t1="".concat("https://api-v2-mainnet.paras.id","/like/").concat(e,"/").concat(n),t.t2=a,t.next=11,h.default.authToken();case 11:return t.t3=t.sent,t.t4={authorization:t.t3},t.t5={headers:t.t4},t.next=16,t.t0.put.call(t.t0,t.t1,t.t2,t.t5);case 16:if(200===t.sent.status){t.next=21;break}return ft(!1),_t(xt-1),t.abrupt("return");case 21:(0,Z.CG)("".concat(e,"::").concat(n),i);case 22:case"end":return t.stop()}}),t)})));return function(e,n,i){return t.apply(this,arguments)}}(),Dt=function(){var t=(0,a.Z)(o().mark((function t(e,n,i){var a;return o().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(tt){t.next=3;break}return bt(!0),t.abrupt("return");case 3:return ft(!1),_t(xt-1),a={account_id:tt},t.t0=_(),t.t1="".concat("https://api-v2-mainnet.paras.id","/unlike/").concat(e,"/").concat(n),t.t2=a,t.next=11,h.default.authToken();case 11:return t.t3=t.sent,t.t4={authorization:t.t3},t.t5={headers:t.t4},t.next=16,t.t0.put.call(t.t0,t.t1,t.t2,t.t5);case 16:if(200===t.sent.status){t.next=21;break}return ft(!0),_t(xt+1),t.abrupt("return");case 21:(0,Z.h2)("".concat(e,"::").concat(n),i);case 22:case"end":return t.stop()}}),t)})));return function(e,n,i){return t.apply(this,arguments)}}();return(0,E.jsxs)(E.Fragment,{children:[(0,E.jsx)(b.Z,{tokens:[nt],isAuctionEnds:Nt}),(0,E.jsx)(g.Z,{tokens:[nt],isAuctionEnds:Nt}),(0,E.jsx)(j.Z,{activeToken:st,onCloseModal:function(){ct(null),ut(null)},modalType:dt,setModalType:ut}),(0,E.jsxs)("div",{className:"".concat("large"===Q?"w-full md:w-1/3 lg:w-1/4 p-4":"w-1/2 md:w-1/4 lg:w-1/6 p-2"," flex-shrink-0 relative"),children:[(0,E.jsx)(d.default,{href:"/token/".concat(nt.contract_id,"::").concat(nt.token_series_id),children:(0,E.jsx)("a",{onClick:function(t){return t.preventDefault()},children:(0,E.jsx)("div",{className:"w-full m-auto",children:(0,E.jsx)(c.Z,{imgUrl:(0,l.pf)(nt.metadata.media,null,{width:"600",useOriginal:!1,isMediaCdn:nt.isMediaCdn}),audioUrl:nt.metadata.mime_type&&nt.metadata.mime_type.includes("audio")&&nt.metadata.animation_url,threeDUrl:nt.metadata.mime_type&&nt.metadata.mime_type.includes("model")&&nt.metadata.animation_url,iframeUrl:nt.metadata.mime_type&&nt.metadata.mime_type.includes("iframe")&&nt.metadata.animation_url,imgBlur:nt.metadata.blurhash,flippable:!0,token:{title:nt.metadata.title,collection:nt.metadata.collection||nt.contract_id,copies:nt.metadata.copies,creatorId:nt.metadata.creator_id||nt.contract_id,is_creator:nt.is_creator,description:nt.metadata.description,royalty:nt.royalty,attributes:nt.metadata.attributes,_is_the_reference_merged:nt._is_the_reference_merged,mime_type:nt.metadata.mime_type,is_auction:null===(p=nt.token)||void 0===p?void 0:p.is_auction,started_at:null===(v=nt.token)||void 0===v?void 0:v.started_at,ended_at:null===(x=nt.token)||void 0===x?void 0:x.ended_at,has_auction:null===nt||void 0===nt?void 0:nt.has_auction,animation_url:null===nt||void 0===nt?void 0:nt.animation_url},profileCollection:X,type:$,displayType:Q,isAbleToLike:!0,onLike:function(){return!pt&&Ct(nt.contract_id,nt.token_series_id,"double_click_list")}})})})}),(0,E.jsxs)("div",{className:"px-1 relative ".concat("large"===Q?"mt-4":"mt-2"),children:[(0,E.jsxs)("div",{className:"block",children:[(0,E.jsx)("p",{className:"text-gray-400 text-xs",children:function(){var t;return null!==(t=nt.token)&&void 0!==t&&t.is_auction&&!Nt?yt("OnAuction"):nt.lowest_price&&nt.metadata.copies>1?yt("StartFrom"):yt("OnSale")}()}),(null===(y=nt.token)||void 0===y?void 0:y.is_auction)&&!Nt&&(0,E.jsx)("p",{className:"text-gray-100 text-[9px] font-bold",children:function(){var t,e;return null!==(t=nt.token)&&void 0!==t&&t.bidder_list&&0!==(null===(e=nt.token)||void 0===e?void 0:e.bidder_list.length)?"Highest Bid":"Starting Bid"}()}),(0,E.jsx)("div",{className:"text-gray-100 ".concat("large"===Q&&(null===(w=nt.token)||void 0===w||!w.is_auction)||Nt?"text-2xl":"small"!==Q&&null!==(C=nt.token)&&void 0!==C&&C.is_auction&&!Nt?"text-lg -mt-.5 -mb-2":"small"===Q&&null!==(L=nt.token)&&void 0!==L&&L.is_auction&&!Nt?"text-base":"text-lg"),children:jt||null!==(I=nt.token)&&void 0!==I&&I.is_auction&&!Nt?(0,E.jsxs)("div",{className:"flex items-baseline space-x-1",children:[(0,E.jsx)("div",{className:"truncate",children:"0"!==jt||null!==(A=nt.token)&&void 0!==A&&A.is_auction?jt&&null!==(M=nt.token)&&void 0!==M&&M.has_price&&!Nt||nt.lowest_price&&!Nt?"".concat((0,l.gL)(null!==(T=nt.token)&&void 0!==T&&T.is_auction&&0!==(null===(U=nt.token)||void 0===U||null===(B=U.bidder_list)||void 0===B?void 0:B.length)&&Et("amount")||jt,24,4)," \u24c3"):(0,E.jsx)("div",{className:"line-through text-red-600",children:(0,E.jsx)("span",{className:"text-gray-100",children:yt("SALE")})}):yt("Free")}),jt&&!Nt&&(0,E.jsxs)("div",{className:"".concat(null!==(z=nt.token)&&void 0!==z&&z.is_auction?"text-[9px]":"text-xs"," text-gray-400 truncate"),children:["~ $",(0,l.gL)(f().BigInt(null!==(q=nt.token)&&void 0!==q&&q.is_auction&&0!==(null===(R=nt.token)||void 0===R||null===(Y=R.bidder_list)||void 0===Y?void 0:Y.length)&&Et("amount")||jt)*at.nearUsdPrice,24,2)]})]}):(0,E.jsx)("div",{className:"line-through text-red-600",children:(0,E.jsx)("span",{className:"text-gray-100",children:yt("SALE")})})})]}),(0,E.jsxs)("div",{className:"".concat("flex gap-1"," text-right absolute top-0 right-0 flex-col items-end"),children:["collection"===$&&!!nt.metadata.score&&(0,E.jsxs)("p",{className:"text-white opacity-80 md:text-sm",style:{fontSize:11},children:["Rarity Score ",null===(F=nt.metadata)||void 0===F||null===(J=F.score)||void 0===J?void 0:J.toFixed(2)]}),V&&(0,E.jsxs)("div",{className:"inline-flex items-center",children:[(0,E.jsx)("div",{className:"cursor-pointer",onClick:function(){pt?Dt(nt.contract_id,nt.token_series_id,"list"):Ct(nt.contract_id,nt.token_series_id,"list")},children:(0,E.jsx)(S.Z,{size:"large"===Q?18:16,color:pt?"#c51104":"transparent",stroke:pt?"none":"white"})}),(0,E.jsx)("p",{className:"text-white ml-1 ".concat("large"===Q?"text-sm":"text-xs"),children:(0,l.NU)(xt||0,1)})]})]}),(0,E.jsxs)("div",{className:"flex justify-between md:items-baseline",children:[null===(W=nt.token)||void 0===W||!W.is_auction||tt!==(null===(G=nt.token)||void 0===G?void 0:G.owner_id)&&Et("bidder")!==tt?(0,E.jsx)("p",{className:"font-bold text-white ".concat(Nt&&"text-opacity-40"," cursor-pointer hover:opacity-80 ").concat("large"===Q?"text-base md:text-base":"text-sm md:text-sm"," mb-1 md:mb-0"),onClick:function(){return Nt?St():function(t){var e=t.lowest_price||t.price;if(ct(t),t.is_non_mintable&&t.total_mint===t.metadata.copies)if(void 0===t.token&&t.lowest_price)Zt(t,{tab:"owners"});else if(t.token&&t.token.owner_id===tt)ut("updatelisting");else{var n,i;ut(!e||null!==(n=t.token)&&void 0!==n&&n.is_auction&&!Nt?null!==(i=t.token)&&void 0!==i&&i.is_auction&&!Nt?"placebid":"offer":"buy")}else if(tt===t.metadata.creator_id||!t.metadata.creator_id&&tt===t.contract_id||t.token&&t.token.owner_id===tt)ut("updatelisting");else if(null===t.price&&void 0===t.token&&t.lowest_price)Zt(t,{tab:"owners"});else{var a,r;ut(!e||null!==(a=t.token)&&void 0!==a&&a.is_auction?null!==(r=t.token)&&void 0!==r&&r.is_auction?"placebid":"offer":"buy")}}(nt)},children:function(t){var e,n,i,a,r=t.lowest_price||t.price;return t.is_non_mintable&&t.total_mint===t.metadata.copies?t.token&&t.token.owner_id===tt?yt("UpdateListing"):!r||null!==(i=t.token)&&void 0!==i&&i.is_auction||Nt?null!==(a=t.token)&&void 0!==a&&a.is_auction&&!Nt?"Place a Bid":Nt?"Auction Ends":"Place Offer":"Buy Now":tt===t.metadata.creator_id||!t.metadata.creator_id&&tt===t.contract_id?yt("UpdatePrice"):t.token&&t.token.owner_id===tt?yt("UpdateListing"):!r||null!==(e=t.token)&&void 0!==e&&e.is_auction||Nt?null!==(n=t.token)&&void 0!==n&&n.is_auction&&!Nt?"Place a Bid":Nt?"Auction Ends":"Place Offer":"Buy Now"}(nt)}):Et("bidder")!==tt||Nt?Nt?(0,E.jsx)("p",{className:"font-bold text-white text-opacity-40 hover:opacity-80 cursor-pointer ".concat("large"===Q?"text-base md:text-base":"text-sm md:text-sm"," mb-1 md:mb-0"),onClick:St,children:"Auction Ends"}):(0,E.jsx)("p",{className:"font-bold text-white text-opacity-40 ".concat("large"===Q?"text-base md:text-base":"text-sm md:text-sm"," mb-1 md:mb-0"),children:"Auction on going"}):(0,E.jsx)("p",{className:"font-bold text-white text-opacity-40 ".concat("large"===Q?"text-base md:text-base":"text-sm md:text-sm"," mb-1 md:mb-0"),children:"You're currently bid"}),(0,E.jsx)(d.default,{href:"/token/".concat(nt.contract_id,"::").concat(nt.token_series_id),children:(0,E.jsx)("a",{onClick:function(t){t.preventDefault(),Zt(nt)},className:"text-gray-300 underline ".concat("large"===Q?"text-sm md:text-sm":"text-xs md:text-xs"),children:"large"===Q?"See Details":"More"})})]})]})]}),(0,E.jsx)(P.Z,{onClose:function(){return bt(!1)},show:kt})]})}},39430:function(t,e,n){var i=n(67294),a=n(11163),r=n(28474),o=n(12705),s=n(7570),c=n(60035),l=n(85893);e.Z=function(t){var e=t.tokens,n=void 0===e?[]:e,d=t.isAuctionEnds,u=(0,a.useRouter)(),m=(0,s.Y)().localeLn,p=(0,i.useState)(null),f=p[0],v=p[1],x=function(){var t=window.sessionStorage.getItem("prevPath");t&&"/"===t[0]?u.push(t,t,{shallow:!0}):u.back()};return(0,i.useEffect)((function(){u.beforePopState((function(t){return t.options.scroll=!1,!0}))}),[]),(0,i.useEffect)((function(){if(u.query.tokenSeriesId){var t=n.find((function(t){return(null===t||void 0===t?void 0:t.token_series_id)===u.query.tokenSeriesId&&(null===t||void 0===t?void 0:t.contract_id)===u.query.contractId}));void 0===(null===t||void 0===t?void 0:t.token)&&v(t)}else v(null)}),[u.query,JSON.stringify(n),d]),(0,l.jsx)("div",{children:f&&(0,l.jsx)(o.Z,{close:function(){return x()},children:(0,l.jsxs)("div",{className:"max-w-5xl m-auto w-full relative",children:[(0,l.jsx)("div",{className:"absolute top-0 left-0 p-4 z-50",children:(0,l.jsxs)("div",{className:"cursor-pointer flex items-center select-none",onClick:function(){return x()},children:[(0,l.jsx)(c.CC,{size:16}),(0,l.jsx)("p",{className:"pl-2 text-gray-100 cursor-pointer relative z-50",children:m("Back")})]})}),(0,l.jsx)(r.Z,{token:f,isAuctionEnds:d})]})})})}},61522:function(t,e,n){var i=n(92809),a=n(80318),r=n(30266),o=n(809),s=n.n(o),c=n(9669),l=n.n(c),d=n(8100);function u(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,i)}return n}function m(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?u(Object(n),!0).forEach((function(e){(0,i.Z)(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):u(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}e.Z=function(t){var e=t.key,n=t.initialData,i=t.params,o=void 0===i?{}:i,c=function(){var t=(0,r.Z)(s().mark((function t(e){var n,i,r,c;return s().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=e.split("::"),i=(0,a.Z)(n,2),r=i[0],c=i[1],t.abrupt("return",l().get("".concat("https://api-v2-mainnet.paras.id","/token-series"),{params:m({contract_id:r,token_series_id:c,lookup_token:!0},o)}).then((function(t){return t.data.data.results[0]})));case 2:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),u=(0,d.ZP)(e||"".concat(n.contract_id,"::").concat(n.token_series_id),c,{fallbackData:n,revalidateOnMount:!1,revalidateOnFocus:!1,revalidateIfStale:!1,revalidateOnReconnect:!1,refreshInterval:0}),p=u.data,f=u.mutate,v=u.error;return{token:p,isLoading:!v&&!p,isError:v,mutate:f}}}}]);
//# sourceMappingURL=7917-3ac0e4b3b15f92a55166.js.map